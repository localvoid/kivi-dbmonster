(function(){'use strict';function q(a,b){this.a=a;this.b=b}var aa=0;function t(a){aa++;this.name=a;this.a=null;a=[];for(var b=Math.floor(10*Math.random()+1),d=0;d<b;d++)a.push(new q(15*Math.random(),.1>Math.random()?"vacuum":.2>Math.random()?"<IDLE> in transaction":"SELECT blah FROM something"));this.a=a}var ba=new q(0,"");function ca(a){a=a.a.slice();a.sort(function(a,d){return a.a-d.a});for(a=a.slice(0,5);5>a.length;)a.push(ba);return a}
function da(){this.a=[];for(var a=0;50>a;a++)this.a.push(new t("cluster"+a)),this.a.push(new t("cluster"+a+"slave"))}function ea(a){var b=u;a=a.a;for(var d=0;d<a.length;d++)Math.random()<b&&(a[d]=new t(a[d].name))};function v(a,b){this.a=a;this.b=b};function w(){this.a=0;this.g=[];this.b=this.f=this.c=this.h=null};function fa(a){var b=this.a="__pms"+Math.random().toString();window.addEventListener("message",function(d){d.source===window&&d.data===b&&a()})};function ga(a){this.b=new window.MutationObserver(a);this.a=document.createTextNode("");this.b.observe(this.a,{characterData:!0})};function x(){this.a=[];this.b=[]}function y(a){for(var b=0,d=a.a;b<d.length;)d[b++]();b=0;for(d=a.b;b<d.length;)d[b].call(d[b+1]),b+=2};new function(){this.a=0;this.c=1;this.b=new x;this.g=new x;this.f=new w;this.h=new w;this.j=[];var a=this;new ga(function(){a.a|=256;for(var b=a.b;0!==b.a.length||0!==b.b.length;)a.b=new x,y(b),b=a.b;a.c++;a.a&=-258});new fa(function(){a.a&=-3;a.a|=256;var b=a.g;if(0!==b.a.length||0!==b.b.length)a.g=new x,y(b);a.c++;a.a&=-257});this.i=function(){var b=a.j,d,c,f,e,h,g;a.a&=-9;a.a|=256;d=a.h;a.h=a.f;a.f=d;for(h=0;h<b.length;h++)b[h].a|=8;do{for(;0!==(d.a&3);){if(0!==(d.a&1))for(d.a&=-2,c=d.g,h=0;h<
c.length;h++)if(f=c[h],null!==f)for(c[h]=null,g=0;g<f.length;g++)e=f[g],e.constructor===z?B(e):e.call();if(0!==(d.a&2))for(d.a&=-3,f=d.h,h=0;h<f.length;h++)e=f[h],e.constructor===z?B(e):e.call()}h=0;for(g=b.length;h<g;)e=b[h++],0===(e.a&16)?(e.a&=-33,h===g?b.pop():b[--h]=b.pop()):B(e);for(;0!==(d.a&4);)for(d.a&=-5,f=d.c,d.c=null,h=0;h<f.length;h++)e=f[h],e.constructor===z?B(e):e.call()}while(0!==(d.a&3));for(;0!==(d.a&8);)for(d.a&=-9,f=d.f,h=0;h<f.length;h++)e=f[h],e.constructor===z?B(e):e.call();
null!==d.b&&(d.b.constructor===D?d.b.b.focus():d.b.focus(),d.b=null);0<b.length&&0===(a.a&8)&&(a.a|=8,window.requestAnimationFrame(a.i));a.c++;a.a&=-257}};function F(){this.a=0;this.c="div";this.b=null}function z(a,b,d,c,f,e){this.a=a;this.i=b;this.j=null===d?0:d.j+1;this.b=c;this.c=e;this.h=this.g=this.f=null}function G(a,b,d){var c;void 0===c&&(c=0===(a.a&1)?document.createElement(a.c):document.createElementNS(H,a.c));return new z(10,a,d,b,0,c)}function B(a){10===(a.a&10)&&(a.i.b(a),a.a&=-9)}function I(a,b){null===a.f?(b.h=a,0!==(a.a&4)?(K(b,a.c,a),a.a&=-5):(b.b=a.c,L(b,a))):M(a.f,b,a);a.f=b}
function N(a){a.a|=1;a.a&=-19;var b=a.g;if(null!==b)if(b.constructor===v)b.b.a(b);else for(var d=0;d<b.length;d++){var c=b[d];c.b.a(c)}a.g=null;b=a.h;if(null!==b)if(b.constructor===v)b.b.a(b);else for(d=0;d<b.length;d++)c=b[d],c.b.a(c);a.h=null;a=a.f;null!==a&&(a.constructor===D?O(a):a.constructor===z&&N(a))};var H="http://www.w3.org/2000/svg";function D(a,b,d){this.a=a;this.i=b;this.c=d;this.h=this.b=this.g=this.f=this.j=null}function P(a){return new D(2,a,null)}function Q(a,b){void 0===b&&(b=null);return new D(4,a,b)}D.prototype.type=function(a){this.j=a;return this};function R(a,b){a.f=b;return a}function S(a,b){a.g=b;return a}function T(a,b){return a.a===b.a&&a.i===b.i&&a.j===b.j&&!0}
function U(a,b){var d=a.a;0!==(d&1)?a.b=document.createTextNode(a.c):0!==(d&2)?a.b=0===(d&16)?document.createElement(a.i):document.createElementNS(H,a.i):0!==(d&4)&&(d=G(a.i,a.c,b),a.b=d.c,a.h=d)}
function L(a,b){var d,c;c=a.a;var f,e;if(0!==(c&14))if(d=a.b,f=null,null!==a.j&&(f=a.j),null!==a.f&&(e=a.f.join(" "),f=null===f?e:f+" "+e),null!==f&&(0!==(c&2)?(a.c=f,d.className=f):0!==(c&4)?d.className=f:(e=d.className,d.className=""===e?f:e+" "+f)),0!==(c&4))B(a.h);else if(null!==a.g)if(c=a.g,"string"===typeof c)d.textContent=c;else for(d=0,c=a.g.length;d<c;d++)V(a,a.g[d],null,b)}
function K(a,b,d){var c=a.a,f=a.g;a.b=b;if(0!==(c&4))b=new z(14,a.i,d,a.c,0,b),B(a.h=b);else if(null!==f&&"string"!==typeof f&&0<f.length){for(var c=b.firstChild,e;8===c.nodeType;)e=c,c=c.nextSibling,b.removeChild(e);for(a=0;a<f.length;a++)for(K(f[a],c,d),c=c.nextSibling;8===c.nodeType;)e=c,c=c.nextSibling,b.removeChild(e)}}
function M(a,b,d){var c=a.b,f=a.a,e,h;b.b=c;if(0!==(f&1))a.c!==b.c&&(a.b.nodeValue=b.c);else if(0!==(f&14)){if(0!==(f&2))a.f!==b.f?(null===b.c&&(h=b.j,null!==b.f&&(e=b.f.join(" "),h=null===h?e:h+" "+e),b.c=h),a.c!==b.c&&(c.className=null===b.c?"":b.c)):b.c=a.c;else if(a.f!==b.f){e=a.f;h=b.f;var c=c.classList,g,m,l,k;if(null!==e&&0!==e.length)if(null===h||0===h.length)for(g=0;g<e.length;g++)c.remove(e[g]);else if(1===e.length&&1===h.length)m=e[0],l=h[0],m!==l&&(c.remove(m),c.add(l));else if(1===e.length){m=
e[0];k=-1;for(g=0;g<h.length;g++)if(l=h[g],m===l){k=g;break}else c.add(l);if(-1!==k)for(g=k+1;g<h.length;g++)c.add(h[g]);else c.remove(m)}else if(1===h.length){l=h[0];k=-1;for(g=0;g<e.length;g++)if(m=e[g],m===l){k=g;break}else c.remove(m);if(-1!==k)for(g=k+1;g<e.length;g++)c.remove(e[g]);else c.add(l)}else{k=g=0;for(var n=e.length-1,p=h.length-1,A=!1,r;g<=n&&k<=p&&e[g]===h[k];)g++,k++;for(;g<=n&&k<=p&&e[n]===h[p];)n--,p--;for(var C=Array(p-k+1);g<=n;g++){m=e[g];A=!0;for(r=k;r<=p;r++)if(l=h[r],m===
l){A=!1;C[r-k]=!0;break}A&&c.remove(m)}for(g=k;g<=p;g++)C[g-k]||c.add(h[g])}else if(null!==h&&0<h.length)for(g=0;g<h.length;g++)c.add(h[g])}if(0!==(f&4))a=b.h=a.h,d=b.c,a.b!==d&&(a.b=d,a.a|=8),B(a);else if(f=a.g,b=b.g,c=0,g=!1,"string"===typeof f)if("string"===typeof b)f!==b&&((d=a.b.firstChild)?d.nodeValue=b:a.b.textContent=b);else{if(null!==b)for(;c<b.length;)V(a,b[c++],null,d)}else if("string"===typeof b){if(null!==f)for(;c<f.length;)W(a,f[c++]);a.b.textContent=b}else if(null!==f&&0!==f.length)if(null===
b||0===b.length)for(;c<f.length;)W(a,f[c++]);else if(1===f.length&&1===b.length)e=f[0],h=b[0],T(e,h)?M(e,h,d):(b=h,f=e,U(b,d),a.b.replaceChild(b.b,f.b),O(f),L(b,d));else if(1===f.length){e=f[0];if(0===(a.a&32))for(;c<b.length;){h=b[c++];if(T(e,h)){M(e,h,d);g=!0;break}V(a,h,e.b,d)}else for(;c<b.length;){h=b[c++];M(e,h,d);g=!0;break}if(g)for(;c<b.length;)V(a,b[c++],null,d);else W(a,e)}else if(1===b.length){h=b[0];if(0===(a.a&32))for(;c<f.length;){e=f[c++];if(T(e,h)){M(e,h,d);g=!0;break}W(a,e)}else for(;c<
f.length;){e=f[c++];M(e,h,d);g=!0;break}if(g)for(;c<f.length;)W(a,f[c++]);else V(a,h,null,d)}else if(0===(a.a&32)){e=c=0;g=f.length-1;for(h=b.length-1;c<=g&&e<=h;){k=f[c];l=b[e];if(!T(k,l))break;c++;e++;M(k,l,d)}for(;c<=g&&e<=h;){k=f[g];l=b[h];if(!T(k,l)){console.log(k,l);break}g--;h--;M(k,l,d)}for(;c<=g&&e<=h;)k=f[c++],l=b[e++],T(k,l)?M(k,l,d):(m=a,n=d,U(l,n),m.b.replaceChild(l.b,k.b),O(k),L(l,n));if(c<=g){do W(a,f[c++]);while(c<g)}else if(e<=h){f=h+1;f=f<b.length?b[f].b:null;do V(a,b[e++],f,d);
while(e<h)}}else{e=l=0;k=f.length-1;m=b.length-1;h=f[l];var c=b[e],J,n=0;a:do for(;;){M(h,c,d);l++;e++;if(l>k||e>m)break a;h=f[l];c=b[e]}while(l<=k&&e<=m);if(l>k)for(k=m+1,k=k<b.length?b[k].b:null;e<=m;)V(a,b[e++],k,d);else if(e>m)for(;l<=k;)W(a,f[l++]);else{p=k-l+1;c=m-e+1;h=Array(c);for(g=0;g<c;g++)h[g]=-1;A=!1;C=0;if(16>=p*c)for(g=l;g<=k;g++){var E=!0;r=f[g];for(l=e;l<=m;){J=b[l];h[l-e]=g;n>l?A=!0:n=l;M(r,J,d);E=!1;break}E&&(W(a,r),C++)}else{E={};for(g=e;g<=m;g++)E[null]=g;for(g=l;g<=k;g++)r=f[g],
l=E[null],void 0!==l?(J=b[l],h[l-e]=g,n>l?A=!0:n=l,M(r,J,d)):(W(a,r),C++)}if(A){g=h.slice(0);f=[];f.push(0);m=0;for(l=h.length;m<l;m++)if(-1!==h[m])if(k=f[f.length-1],h[k]<h[m])g[m]=k,f.push(m);else{k=0;for(n=f.length-1;k<n;)p=(k+n)/2|0,h[f[p]]<h[m]?k=p+1:n=p;h[m]<h[f[k]]&&(0<k&&(g[m]=f[k-1]),f[k]=m)}k=f.length;for(n=f[k-1];0<k--;)f[k]=n,n=g[n];l=f.length-1;for(g=c-1;0<=g;g--)-1===h[g]?(m=g+e,c=b[m],k=m+1,k=k<b.length?b[k].b:null,V(a,c,k,d)):0>l||g!==f[l]?(m=g+e,c=b[m],k=m+1,k=k<b.length?b[k].b:null,
a.b.insertBefore(c.b,k)):l--}else if(p-C!==c)for(g=c-1;0<=g;g--)-1===h[g]&&(m=g+e,c=b[m],k=m+1,k=k<b.length?b[k].b:null,V(a,c,k,d))}}else if(null!==b&&0<b.length)for(c=0;c<b.length;c++)V(a,b[c],null,d)}}function O(a){if(0!==(a.a&4))N(a.h);else if(null!==a.g&&(a=a.g,"string"!==typeof a))for(var b=0;b<a.length;b++)O(a[b])}function V(a,b,d,c){U(b,c);a.b.insertBefore(b.b,d);L(b,c)}function W(a,b){a.b.removeChild(b.b);O(b)};var ha=["popover","left"],ia=new F;ia.b=function(a){I(a,S(R(new D(8,null,null),ha),[S(P("div").type("popover-content"),a.b),P("div").type("arrow")]))};var ja=["elapsed","warn_long"],ka=["elapsed","warn"],la=["elapsed","short"],ma=["label-important"],na=["label-warning"],oa=["label-success"];function pa(a){if(!a)return"";var b=parseFloat(a).toFixed(2);60<a&&(b=(a%60).toFixed(2).split("."),b=Math.floor(a/60)+":"+b[0]+"."+b[1]);return b}var X=new F;X.c="tr";
X.b=function(a){for(var b=a.b,d=ca(b),c=b.a.length,b=[S(P("td").type("dbname"),b.name),S(P("td").type("query-count"),[S(R(P("span").type("label"),20<=c?ma:10<=c?na:oa),""+c)])],c=0;5>c;c++){var f=d[c],e=f.a;b.push(S(R(P("td").type("Query"),10<=e?ja:1<=e?ka:la),[new D(1,null,pa(e)),Q(ia,f.b)]))}I(a,S(new D(8,null,null),b))};var qa=["table","table-striped","latest-data"],Y=new F;Y.c="table";Y.b=function(a){for(var b=a.b.a,d=Array(b.length),c=0;c<b.length;c++)d[c]=Q(X,b[c]);I(a,S(R(new D(8,null,null),qa),[S(P("tbody"),d)]))};function ra(a){var b=document.getElementById("app");a=G(Y,a,null);b.appendChild(a.c);B(a);return a};function sa(a){this.name=a;this.a=[];var b=this.g=document.createElement("div");b.style.display="inline-block";b.style.padding="2px";var d=document.createElement("div");d.style.fontSize="9px";d.style.lineHeight="12px";d.style.color="#0f0";d.textContent=a;a=this.h=document.createElement("div");a.style.fontSize="9px";a.style.lineHeight="12px";a.style.color="#0f0";var c=document.createElement("canvas");c.width=250;c.height=100;c.style.verticalAlign="bottom";b.appendChild(d);b.appendChild(a);b.appendChild(c);
this.f=c.getContext("2d");this.c=!1;this.b=this.b.bind(this)}sa.prototype.b=function(){var a=this.a,b=this.f,d=Math.max.apply(Math,a),c=Math.min.apply(Math,a);this.h.textContent="time: "+a[a.length-1].toFixed(2)+" min: "+c.toFixed(2)+" max: "+d.toFixed(2);d=100/d;b.fillStyle="#020";b.fillRect(0,0,250,100);b.fillStyle="#0f0";for(var f=0;f<a.length;f++)c=a[f]*d,b.fillRect(f,100,1,-c);this.c=!1};
var Z=new function(){this.b={};var a=this.a=document.createElement("div");a.style.position="fixed";a.style.right="0";a.style.bottom="0";a.style.background="#010";a.style.opacity="0.9"};function ta(a){var b=Z.b.update;void 0===b&&(b=Z.b.update=new sa("update"),Z.a.appendChild(b.g));var d=window.performance.now();a();b.a.push(window.performance.now()-d);250<b.a.length&&b.a.shift();a=b;a.c||(a.c=!0,requestAnimationFrame(a.b))};var u=.5;
document.addEventListener("DOMContentLoaded",function(){function a(){ea(b);ta(function(){Y.b(e)});requestAnimationFrame(a)}document.body.appendChild(Z.a);var b=new da,d=document.createElement("div");d.style.display="flex";var c=document.createElement("input");c.type="range";c.style.marginBottom="10px";c.style.marginTop="5px";var f=document.createElement("label");f.textContent="mutations : "+(100*u).toFixed(0)+"%";c.addEventListener("change",function(a){u=a.target.value/100;f.textContent="mutations : "+
(100*u).toFixed(0)+"%"});d.appendChild(f);d.appendChild(c);document.body.insertBefore(d,document.body.firstChild);var e=ra(b);requestAnimationFrame(a)});}).call();
