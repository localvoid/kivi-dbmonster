(function(){'use strict';var p;function aa(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}
function t(a,b,c){120!==b.charCodeAt(0)?a.setAttribute(b,c):109===b.charCodeAt(1)&&108===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",b,c):108===b.charCodeAt(1)&&105===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/1999/xlink",b,c):a.setAttribute(b,c)}function u(a,b,c){this.a=a;this.h=b;this.l=null;this.f=c;this.s=this.b=this.g=this.m=this.o=this.j=null}p=u.prototype;p.key=function(a){this.l=a;return this};p.w=function(a){this.f=a;return this};
p.$=function(a){this.j=a;return this};p.data=function(a){this.f=a;return this};p.style=function(a){this.o=a;return this};p.className=function(a){this.m=a;return this};p.children=function(a){this.g=a;return this};p.value=function(a){this.a|=64;this.g=a;return this};p.checked=function(a){this.a|=128;this.g=a;return this};function v(a){if(0===(a.a&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)v(a[b])}else w(a.s)}
function x(a){if(0===(a.a&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)x(a[b])}else a.s.detach()}function z(a){if(0===(a.a&256))if(0!==(a.a&4)){a=a.s;a.c|=1;null!==a.u&&0===(a.c&65536)&&z(a.u);0!==(a.c&2)&&A(a);var b=a.v.ia;null!==b&&b(a,a.w,a.state)}else{if(null!==a.g&&(a=a.g,"string"!==typeof a))for(b=0;b<a.length;b++)z(a[b])}else x(a)}
function B(a,b){var c=a.a;0!==(c&1)?a.b=document.createTextNode(a.f):0!==(c&2)?a.b=0===(c&131072)?0===(c&32768)?document.createElement(a.h):document.createElementNS("http://www.w3.org/2000/svg",a.h):a.h.createElement():0===(c&256)&&(b=ba(a.h,b,a.f),a.b=b.element,a.s=b)}
function D(a,b){var c,d,e,g,f=a.a,l;if(0!==(f&10)){l=a.b;if(0===(f&262144)){var k=a.f;if(null!==k)for(g=Object.keys(k),c=0,d=g.length;c<d;c++)e=g[c],l[e]=k[e];if(null!==a.j)for(g=Object.keys(a.j),c=0,d=g.length;c<d;c++)e=g[c],t(l,e,a.j[e]);null!==a.o&&(0===(f&32768)?l.style.cssText=a.o:l.setAttribute("style",a.o));null!==a.m&&(0===(f&32768)?l.className=a.m:l.setAttribute("class",a.m))}else 0===(f&8)?a.h.A(l,void 0,a.f):b.v.h.A(l,void 0,a.f);e=a.g;if(null!==e)if(0===(a.a&2048))if(0===(a.a&192))if("string"===
typeof e)l.textContent=e;else for(c=0,d=e.length;c<d;c++)E(a,e[c],null,b);else 0!==(a.a&64)?a.b.value=a.g:a.b.checked=a.g;else l.innerHTML=e}else 0!==(f&4)&&F(a.s)}function E(a,b,c,d){a=a.b;null===b.b?(B(b,d),0!==(b.a&4)&&w(b.s),D(b,d),a.insertBefore(b.b,c)):(a.insertBefore(b.b,c),v(b),F(b.s,0===(b.a&512)?b.f:null))}function ca(a,b,c,d){a=a.b;null===b.b?(B(b,d),0!==(b.a&4)&&w(b.s),D(b,d),a.replaceChild(b.b,c.b)):(a.replaceChild(b.b,c.b),v(b),F(b.s,0===(b.a&512)?b.f:null));z(c)}
function ea(a,b){a.b.textContent="";for(a=0;a<b.length;a++)z(b[a])}
function G(a,b,c){var d=a.b,e=a.a,g;b.b=a.b;if(0!==(e&1))a.f!==b.f&&(a.b.nodeValue=b.f);else if(0!==(e&10)){if(0===(e&262144)){if(a.f!==b.f){g=a.f;var f=b.f,l=Object.keys(g),k,m;for(m=0;m<l.length;m++){k=l[m];var h=f[k];g[k]!==h&&(d[k]=h)}}if(a.j!==b.j)if(0===(a.a&32))for(g=a.j,f=b.j,l=Object.keys(g),m=0;m<l.length;m++)k=l[m],h=f[k],g[k]!==h&&t(d,k,h);else if(g=a.j,f=b.j,null!==g)if(null===f)for(k=Object.keys(g),l=0;l<k.length;l++)d.removeAttribute(k[l]);else{k=Object.keys(g);for(l=0;l<k.length;l++)m=
k[l],f.hasOwnProperty(m)?(h=f[m],g[m]!==h&&t(d,m,h)):d.removeAttribute(m);k=Object.keys(f);for(l=0;l<k.length;l++)m=k[l],g.hasOwnProperty(m)||t(d,m,f[m])}else if(null!==f)for(k=Object.keys(f),l=0;l<k.length;l++)m=k[l],t(d,m,f[m]);a.o!==b.o&&(g=null===b.o?"":b.o,0===(e&32768)?d.style.cssText=g:d.setAttribute("style",g));a.m!==b.m&&(g=null===b.m?"":b.m,0===(e&32768)?d.className=g:d.setAttribute("class",g))}else a.f!==b.f&&(0===(e&8)?a.h.A(d,a.f,b.f):c.v.h.A(d,a.f,b.f));if(0===(a.a&192)){if(a.g!==b.g)if(0===
(a.a&2048))if(e=a.g,b=b.g,d=0,"string"===typeof e)if(null===b)a.b.removeChild(a.b.firstChild);else if("string"===typeof b)(c=a.b.firstChild)?c.nodeValue=b:a.b.textContent=b;else for(a.b.removeChild(a.b.firstChild);d<b.length;)E(a,b[d++],null,c);else if("string"===typeof b){if(null!==e)for(;d<e.length;)z(e[d++]);a.b.textContent=b}else if(null!==e&&0!==e.length)if(null===b||0===b.length)ea(a,e);else if(1===e.length&&1===b.length)e=e[0],b=b[0],H(e,b)?G(e,b,c):ca(a,b,e,c);else if(0===(a.a&16)){d=f=0;
l=e.length-1;for(g=b.length-1;f<=l&&d<=g;){k=e[f];m=b[d];if(!H(k,m))break;f++;d++;G(k,m,c)}for(;f<=l&&d<=g;){k=e[l];m=b[g];if(!H(k,m))break;l--;g--;G(k,m,c)}for(;f<=l&&d<=g;)k=e[f++],m=b[d++],H(k,m)?G(k,m,c):ca(a,m,k,c);if(f<=l){do c=e[f++],a.b.removeChild(c.b),z(c);while(f<=l)}else if(d<=g){e=g+1;e=e<b.length?b[e].b:null;do E(a,b[d++],e,c);while(d<=g)}}else{d=l=0;k=e.length-1;m=b.length-1;f=e[l];g=b[d];var h=e[k],n=b[m],q,C;a:for(;;){for(;f.l===g.l;){G(f,g,c);l++;d++;if(l>k||d>m)break a;f=e[l];g=
b[d]}for(;h.l===n.l;){G(h,n,c);k--;m--;if(l>k||d>m)break a;h=e[k];n=b[m]}if(h.l===g.l){G(h,g,c);a.b.insertBefore(g.b,f.b);k--;d++;if(l>k||d>m)break;h=e[k];g=b[d]}else if(f.l===n.l){G(f,n,c);f=m+1;f=f<b.length?b[f].b:null;a.b.insertBefore(n.b,f);l++;m--;if(l>k||d>m)break;f=e[l];n=b[m]}else break}if(l>k)for(f=m+1,f=f<b.length?b[f].b:null;d<=m;)E(a,b[d++],f,c);else if(d>m)for(;l<=k;)c=e[l++],a.b.removeChild(c.b),z(c);else{var O=k-l+1,f=m-d+1;g=Array(f);for(h=0;h<f;h++)g[h]=-1;var P=!1,r=0,y=0;if(4>=
f||16>=O*f)for(h=l;h<=k;h++){if(q=e[h],y<f)for(n=d;n<=m;n++)if(C=b[n],q.l===C.l){g[n-d]=h;r>n?P=!0:r=n;G(q,C,c);y++;e[h]=null;break}}else{for(var da=new Map,h=d;h<=m;h++)q=b[h],da.set(q.l,h);for(h=l;h<=k;h++)q=e[h],y<f&&(n=da.get(q.l),void 0!==n&&(C=b[n],g[n-d]=h,r>n?P=!0:r=n,G(q,C,c),y++,e[h]=null))}if(O===e.length&&0===y)for(ea(a,e);d<f;)E(a,b[d++],null,c);else{for(h=O-y;0<h;)q=e[l++],null!==q&&(k=q,a.b.removeChild(k.b),z(k),h--);if(P){l=g.slice(0);e=[];e.push(0);k=0;for(m=g.length;k<m;k++)if(-1!==
g[k])if(h=e[e.length-1],g[h]<g[k])l[k]=h,e.push(k);else{h=0;for(n=e.length-1;h<n;)q=(h+n)/2|0,g[e[q]]<g[k]?h=q+1:n=q;g[k]<g[e[h]]&&(0<h&&(l[k]=e[h-1]),e[h]=k)}h=e.length;for(n=e[h-1];0<h--;)e[h]=n,n=l[n];n=e.length-1;for(h=f-1;0<=h;h--)-1===g[h]?(r=h+d,q=b[r],f=r+1,f=f<b.length?b[f].b:null,E(a,q,f,c)):0>n||h!==e[n]?(r=h+d,q=b[r],f=r+1,f=f<b.length?b[f].b:null,a.b.insertBefore(q.b,f)):n--}else if(y!==f)for(h=f-1;0<=h;h--)-1===g[h]&&(r=h+d,q=b[r],f=r+1,f=f<b.length?b[f].b:null,E(a,q,f,c))}}}else{if(null!==
b)for(d=0;d<b.length;d++)E(a,b[d],null,c)}else d.innerHTML=b.g}else 0!==(e&64)?d.value!==b.g&&(d.value=b.g):d.checked!==b.g&&(d.checked=b.g)}else c=b.s=a.s,0!==(e&1024)&&a.f===b.f||F(c,0===(e&512)?b.f:void 0)}function H(a,b){return a.a===b.a&&a.h===b.h&&a.l===b.l}function fa(){this.i=4;this.H=8;this.a=0;this.h="div";this.ia=this.ha=this.ea=this.V=this.A=this.ja=null}p=fa.prototype;p.tagName=function(a){this.h=a;"string"!==typeof a&&(this.i|=a.i,this.H|=a.i,this.a|=a.i);return this};
p.T=function(){this.i|=32768;this.H|=32768;this.a|=32768;return this};p.canvas=function(){this.i|=65536;this.a|=65536;this.h="canvas";return this};p.update=function(a){this.A=a;return this};p.aa=function(a){return new u(4,this,void 0===a?null:a)};function ba(a,b,c){var d;d=0===(a.a&131072)?0===(a.a&32768)?document.createElement(a.h):document.createElementNS("http://www.w3.org/2000/svg",a.h):a.h.createElement();b=new ga(a.i,a,d,b,c);0!==(a.a&1)&&(d.na=b);null!==a.V&&a.V(b,b.w);return b}
function ga(a,b,c,d,e){this.c=a;this.ma=0;this.v=b;this.element=c;this.depth=void 0===d?0:d.depth+1;this.w=void 0===e?null:e;this.state=null;this.u=0===(a&65536)?null:c.getContext("2d");this.Z=this.X=null}p=ga.prototype;p.update=function(a){F(this,a)};p.P=function(a){null===this.u?(a.s=this,a.b=this.element,D(a,this)):G(this.u,a,this);this.u=a};
p.K=function(a,b){this.c|=void 0===a?8:a;if(0===(this.c&5)&&(this.c|=4,(void 0===b?0:b)||I(this),ha(),a=J,0===(this.c&128))){this.c|=128;b=this.depth;for(a.a|=1;b>=a.G.length;)a.G.push(null);var c=a.G[b];null===c?a.G[b]=[this]:c.push(this)}};function w(a){ia(a);null!==a.u&&0===(a.c&65536)&&v(a.u)}p.detach=function(){null!==this.u&&0===(this.c&65536)&&x(this.u);A(this)};p.subscribe=function(a){return a.oa(this)};
function F(a,b){if(void 0!==b&&0===(a.c&512)){var c=a.w,d=a.v.ja;null!==d?d(a,c,b):0===(a.c&4)&&(a.c|=4,I(a));a.w=b}6===(a.c&6)&&(a.v.A(a,a.w,a.state),a.ma=K,a.c&=-133)}function ia(a){a.c|=2;var b=a.v.ea;null!==b&&b(a,a.w,a.state)}function A(a){a.c&=-19;for(var b=a.X;null!==b;)b.fa(),b=b.ga;a.X=null;I(a);b=a.v.ha;null!==b&&b(a,a.w,a.state)}function I(a){for(var b=a.Z;null!==b;)b.fa(),b=b.ga;a.Z=null}
function ja(a){var b=document.getElementById("app");a=ba(ka,void 0,a);b.appendChild(a.element);ia(a);F(a);return a}function L(){this.a=0;this.G=[];this.C=this.U=this.I=this.J=null}L.prototype.write=function(a){this.a|=2;null===this.J&&(this.J=[]);this.J.push(a)};L.prototype.read=function(a){this.a|=4;null===this.I&&(this.I=[]);this.I.push(a)};L.prototype.focus=function(a){this.C=a};var M=0,K=0,N=[],la=[],ma=new L,J=new L,Q=[],na=document.createTextNode(""),oa="__kivi"+Math.random();
(new MutationObserver(pa)).observe(na,{characterData:!0});window.addEventListener("message",qa);function ha(){0===(M&4)&&(M|=4,requestAnimationFrame(ra))}function qa(a){if(a.source===window&&a.data===oa){M&=-3;a=la;la=[];for(var b=0;b<a.length;b++)a[b]();K++}}
function ra(){var a,b;M&=-5;var c=J;J=ma;ma=c;for(b=0;b<Q.length;b++)Q[b].c|=4;do{for(;0!==(c.a&4);)for(c.a&=-5,a=c.I,c.I=null,b=0;b<a.length;b++)a[b]();for(;0!==(c.a&3);){if(0!==(c.a&1)){c.a&=-2;var d=c.G;for(b=0;b<d.length;b++){var e=d[b];if(null!==e)for(d[b]=null,a=0;a<e.length;a++)F(e[a])}}if(0!==(c.a&2))for(c.a&=-3,a=c.J,c.J=null,b=0;b<a.length;b++)a[b]()}b=0;for(a=Q.length;b<a;)d=Q[b++],0===(d.c&16)?(d.c&=-33,b===a?Q.pop():Q[--b]=Q.pop()):F(d)}while(0!==(c.a&7));for(;0!==(c.a&8);)for(c.a&=-9,
a=c.U,c.U=null,b=0;b<a.length;b++)a[b]();null!==c.C&&(c.C.constructor===u?c.C.b.focus():c.C.focus(),c.C=null);0<Q.length&&ha();K++}function pa(){for(;0<N.length;){var a=N;N=[];for(var b=0;b<a.length;b++)a[b]();K++}M&=-2}function sa(a){this.i=131072;this.a=0;this.Y=a;this.W=this.A=this.m=this.o=this.j=this.f=null}p=sa.prototype;p.T=function(){this.i|=32768;this.a|=32768;return this};p.w=function(a){this.f=a;return this};p.$=function(a){this.j=a;return this};p.style=function(a){this.o=a;return this};
p.className=function(a){this.m=a;return this};p.update=function(a){this.i|=262144;this.A=a;return this};p.aa=function(a){return new u(2|this.i,this,void 0===a?null:a)};
p.createElement=function(){var a,b,c,d=this.W;if(null===d){d=0===(this.a&32768)?document.createElement(this.Y):document.createElementNS("http://www.w3.org/2000/svg",this.Y);if(null!==this.f)for(b=Object.keys(this.f),a=0;a<b.length;a++)c=b[a],d[c]=this.f[c];if(null!==this.j)for(b=Object.keys(this.j),a=0;a<b.length;a++)c=b[a],t(d,c,this.j[c]);null!==this.o&&(0===(this.a&32768)?d.style.cssText=this.o:d.setAttribute("style",this.o));null!==this.m&&(0===(this.a&32768)?d.className=this.m:d.setAttribute("class",
this.m));return 0!==(this.a&1)?(this.W=d,d.cloneNode(!1)):d}return d.cloneNode(!1)};function ta(a,b,c,d){this.min=a;this.max=b;this.ca=c;this.ba=d}function R(){this.F=[];this.la=100;this.B=-1}function S(a,b){a.B=(a.B+1)%a.la;a.F[a.B]=b}function ua(a,b){for(var c=a.F,d=0;d<c.length;d++)b(c[(a.B+1+d)%c.length],d)}
function va(a){var b=a.F;if(0===b.length)return new ta(0,0,0,0);for(var c=b[(a.B+1)%b.length],d=c,e=0,g=0;g<b.length;g++){var f=b[(a.B+1+g)%b.length];f<c&&(c=f);f>d&&(d=f);e+=f}return new ta(c,d,e/b.length,b[a.B])}var T=[],wa=-1;function xa(a){T.push(a);-1===wa&&requestAnimationFrame(function(){wa=-1;var a=T;T=[];for(var c=0;c<a.length;c++)a[c]()})}
function U(a){var b=this;this.ka=function(){b.P();b.S=!1};this.name=a;this.element=document.createElement("div");this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0";this.S=!1;this.K()}U.prototype.K=function(){this.S||(this.S=!0,xa(this.ka))};U.prototype.P=function(){throw Error("sync method not implemented");};
function V(a,b,c,d){U.call(this,a);this.c=b;this.R=c;this.F=d;a=document.createElement("div");a.style.cssText="text-align: center";a.textContent=this.name;c=document.createElement("div");0===(b&1)?(this.O=document.createElement("div"),c.appendChild(this.O)):this.O=null;0===(b&2)?(this.M=document.createElement("div"),c.appendChild(this.M)):this.M=null;0===(b&4)?(this.N=document.createElement("div"),c.appendChild(this.N)):this.N=null;0===(b&8)?(this.L=document.createElement("div"),c.appendChild(this.L)):
this.L=null;this.element.appendChild(a);this.element.appendChild(c);0===(b&16)?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=100,this.canvas.height=30,this.D=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):this.D=this.canvas=null}aa(V,U);
V.prototype.P=function(){var a=this,b=va(this.F),c=30/(1.2*b.max),d,e,g;0===(this.c&32)?(d=b.min.toFixed(2),e=b.max.toFixed(2),g=b.ca.toFixed(2),b=b.ba.toFixed(2)):(d=Math.round(b.min).toString(),e=Math.round(b.max).toString(),g=Math.round(b.ca).toString(),b=Math.round(b.ba).toString());null!==this.O&&(this.O.textContent="min: \u00a0"+d+this.R);null!==this.M&&(this.M.textContent="max: \u00a0"+e+this.R);null!==this.N&&(this.N.textContent="mean: "+g+this.R);null!==this.L&&(this.L.textContent="last: "+
b+this.R);null!==this.D&&(this.D.fillStyle="#010",this.D.fillRect(0,0,100,30),this.D.fillStyle="#0f0",ua(this.F,function(b,d){a.D.fillRect(d,30,1,-(b*c))}))};var W=null;function X(){W||(W=document.createElement("div"),W.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(W))}
function ya(){function a(f){0<e&&(g+=d*(1E3/(f-e)-g));e=f;S(b,g);c.K();requestAnimationFrame(a)}X();var b=new R,c=new V("FPS",39,"",b);W.appendChild(c.element);var d=2/121,e=0,g=60;requestAnimationFrame(a)}function za(){function a(){S(b,Math.round(performance.memory.usedJSHeapSize/1048576));c.K();setTimeout(a,30)}X();if(void 0!==performance.memory){var b=new R,c=new V("Memory",5,"MB",b);W.appendChild(c.element);a()}}
function Aa(a){this.data=new R;this.da=new V(a,0,"ms",this.data);this.startTime=-1}var Y={};function Ba(a){X();var b=Y[a];void 0===b&&(Y[a]=b=new Aa(a),W.appendChild(b.da.element))}function Ca(a){a=Y[a];void 0!==a&&(a.startTime=performance.now())}function Da(a){var b=performance.now();a=Y[a];void 0!==a&&-1!==a.startTime&&(S(a.data,b-a.startTime),a.da.K())}function Z(){return"#"+Math.floor(16777215*Math.random()).toString(16)}function Ea(){for(var a=Array(1E4),b=0;1E4>b;b++)a[b]=Z();return a}
var Fa=(new sa("rect")).T().$({width:"4",height:"4"}).update(function(a,b,c){void 0===b&&(a.setAttribute("x",c.x.toString()),a.setAttribute("y",c.y.toString()));if(void 0===b||b.fill!==c.fill)a.style.fill=c.fill}),ka=(new fa).tagName("svg").T().update(function(a,b){for(var c=Array(1E4),d=0;1E4>d;d++)c[d]=Fa.aa({x:d%100*4,y:4*(d/100|0),fill:b[d]});a.P((new u(a.v.H,a.v.h,null)).className("image").children(c))});
document.addEventListener("DOMContentLoaded",function(){function a(){Ca("data update");var c=b;if(0<c)if(1===c)for(c=0;1E4>c;c++)e[c]=Z();else for(var d=0;1E4>d;d++)Math.random()<c&&(e[d]=Z());Da("data update");Ca("view update");g.update(e);Da("view update");requestAnimationFrame(a)}ya();za();Ba("data update");Ba("view update");var b=.5,c=document.createElement("div");c.style.margin="0 auto";c.style.width="80%";var d=document.createElement("input");d.type="range";d.style.width="100%";d.addEventListener("change",
function(a){b=Number.parseFloat(a.target.value)/100});c.appendChild(d);document.body.insertBefore(c,document.body.firstChild);var e=Ea(),g=ja(e);requestAnimationFrame(a)});}).call();
