!function t(e,n,r){function s(l,o){if(!n[l]){if(!e[l]){var a="function"==typeof require&&require;if(!o&&a)return a(l,!0);if(i)return i(l,!0);var u=new Error("Cannot find module '"+l+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[l]={exports:{}};e[l][0].call(f.exports,function(t){var n=e[l][1][t];return s(n?n:t)},f,f.exports,t,e,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)s(r[l]);return s}({1:[function(t){"use strict";function e(t){for(var e=0;e<t.length;e++)t[e].update()}function n(){i.init(new l);for(var t=[],n=0;s>n;n++)t.push(new o.Database("cluster"+n)),t.push(new o.Database("cluster"+n+"slave"));var u=new a(null,t,null);setInterval(function(){e(t),u.invalidate()},r),i.nextFrame().write(function(){i.vdom.injectComponent(u,document.body)})}var r=0,s=100,i=t("kivi"),l=t("kivi/lib/scheduler"),o=t("./data"),a=t("./component/main");document.addEventListener("DOMContentLoaded",function(){n()})},{"./component/main":8,"./data":10,kivi:3,"kivi/lib/scheduler":4}],2:[function(t,e){"use strict";var n={scheduler:null};e.exports=n},{}],3:[function(t,e){"use strict";function n(t){l.scheduler=t}function r(){return l.scheduler.nextFrame()}function s(t){l.scheduler.scheduleMicrotask(t)}function i(t){l.scheduler.action(t)}var l=t("./env"),o=t("./vdom"),a=t("./utils");e.exports={ENV:l,vdom:o,init:n,nextFrame:r,scheduleMicrotask:s,action:i,toFastObj:a.toFastObj,inherits:a.inherits,shallowEq:a.shallowEq}},{"./env":2,"./utils":5,"./vdom":6}],4:[function(t,e){"use strict";function n(t){this._observer=new window.MutationObserver(t),this._node=document.createTextNode(""),this._observer.observe(this._node,{characterData:!0})}function r(){this.flags=0,this.writeTaskGroups=[],this.writeTasks=null,this.readTasks=null,this.afterTasks=null}function s(){this.flags=0,this.dataClock=0,this.clock=-1,this._actions=null,this._microtasks=null,this._currentFrame=new r,this._nextFrame=new r;var t=this;this._microtaskScheduler=new n(function(){t.flags&=~h,t.flags|=f,t.clock++;var e=t._microtasks;if(null!=e){t._microtasks=null;for(var n=0;n<e.length;n++)e[n]()}t.dataClock++,t.performActions(),t.flags&=~f}),this._handleAnimationFrame=function(){var e,n,r,s,h,d;t.flags&=~c,t.flags|=f,t.clock++,e=t._nextFrame,t._nextFrame=t._currentFrame,t._currentFrame=e;do{for(;0!==(e.flags&u);){if(0!==(e.flags&i))for(e.flags&=~i,n=e.writeTaskGroups,h=0;h<n.length;h++)if(r=n[h],null!=r)for(n[h]=null,d=0;d<r.length;d++)(s=r[d])();if(0!==(e.flags&l))for(e.flags&=~l,r=e.writeTasks,h=0;h<r.length;h++)(s=r[h])()}for(;0!==(e.flags&o);)for(e.flags&=~o,r=e.readTasks,e.readTasks=null,h=0;h<r.length;h++)(s=r[h])()}while(0!==(e.flags&u));for(;0!==(e.flags&a);)for(e.flags&=~a,r=e.afterTasks,h=0;h<r.length;h++)(s=r[h])();t.dataClock++,t.performActions(),t.flags&=~f}}n.prototype.requestNextTick=function(){this._toggle^=1,this._node.data=this._toggle};var i=4,l=8,o=16,a=32,u=l|i;r.prototype.write=function(t,e){var n;if(void 0===e&&(e=-1),-1===e)this.flags|=l,null==this.writeTasks&&(this.writeTasks=[]),this.writeTasks.push(t);else{for(this.flags|=i;e>=this.writeTaskGroups.length;)this.writeTaskGroups.push(null);n=this.writeTaskGroups[e],null==n&&(n=this.writeTaskGroups[e]=[]),n.push(t)}},r.prototype.read=function(t){this.flags|=o,null==this.readTasks&&(this.readTasks=[]),this.readTasks.push(t)},r.prototype.after=function(t){this.flags|=a,null==this.afterTasks&&(this.afterTasks=[]),this.afterTasks.push(t)};var f=1,h=2,c=4,d=8,p=16;s.RUNNING=f,s.FRAMETASK_RUNNING=p,s.MICROTASK_RUNNING=d,s.prototype.currentFrame=function(){return this._currentFrame},s.prototype.nextFrame=function(){return 0===(this.flags&c)&&(this.flags|=c,window.requestAnimationFrame(this._handleAnimationFrame)),this._nextFrame},s.prototype.scheduleMicrotask=function(t){0===(this.flags&h)&&(this.flags|=h,this._microtaskScheduler.requestNextTick()),null==this._microtasks&&(this._microtasks=[]),this._microtasks.push(t)},s.prototype.action=function(t){0===(this.flags&h)&&(this.flags|=h,this._microtaskScheduler.requestNextTick()),null==this._actions&&(this._actions=[]),this._actions.push(t)},s.prototype.performActions=function(){for(;null!=this._actions;){var t=this._actions;this._actions=null;for(var e=0;e<t.length;e++)t[e]()}},e.exports=s},{}],5:[function(t,e,n){"use strict";function r(t){function e(){}return e.prototype=t,t}function s(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function i(t,e){var n,r,s;for(s=Object.keys(t),n=0;n<s.length;n++)if(r=s[n],!e.hasOwnProperty(r)||t[r]!==e[r])return!1;for(s=Object.keys(e),n=0;n<s.length;n++)if(!t.hasOwnProperty(r))return!1;return!0}e.exports={toFastObj:r,inherits:s,shallowEq:i}},{}],6:[function(t,e){"use strict";function n(t,e,n,r){this.flags=t,this.key=e,this.tag=n,this.data=r,this.type=null,this.attrs=null,this.style=null,this.classes=null,this.children=null,this.ref=null,this.cref=null}function r(t){return new n(S,null,null,t)}function s(t,e){return new n(S,t,null,e)}function i(t){return new n(D,null,t,null)}function l(t,e){return new n(D,t,e,null)}function o(t){return new n(D|R,null,t,null)}function a(t,e){return new n(D|R,t,e,null)}function u(t,e){return void 0===e&&(e=null),new n(P,null,t,e)}function f(t,e,r){return void 0===r&&(r=null),new n(P,t,e,r)}function h(){return new n(G,null,null,null)}function c(t,e){return t.flags===e.flags&&t.tag===e.tag}function d(t,e){var n=t.flags;if(0!==(n&S))t.ref=document.createTextNode(t.data);else if(0!==(n&D))t.ref=0===(n&R)?document.createElement(t.tag):document.createElementNS("http://www.w3.org/2000/svg",t.tag);else if(0!==(n&P)){var r=new t.tag(e,t.data,t.children);r.create(),r.init(),t.ref=r.element,t.cref=r}}function p(t,e){var n,r,s,i,l,o,a,u,f=t.flags;if(0!==(f&(D|P|G))){if(l=t.ref,null!=t.attrs)for(i=Object.keys(t.attrs),n=0,r=i.length;r>n;n++)s=i[n],l.setAttribute(s,t.attrs[s]);if(null!=t.style)for(o=l.style,i=Object.keys(t.style),n=0,r=i.length;r>n;n++)s=i[n],o.setProperty(s,t.style[s]);if(0!==(f&(D|P))){if(a=null,null!=t.type&&(a=t.type),null!=t.classes){var h=t.classes.join(" ");a=null==a?h:a+" "+h}null!=a&&(t.data=a,l.className=a)}else if(u=null,null!=t.type&&(u=l.classList,u.add(t.type)),null!=t.classes)for(null==u&&(u=l.classList),n=0,r=t.classes.length;r>n;n++)u.add(t.classes[n]);if(0!==(f&P))t.cref.update();else if(null!=t.children)for(n=0,r=t.children.length;r>n;n++)m(t,t.children[n],null,e)}}function g(t,e,n){var r,s,i,l=t.ref,o=t.flags;e.ref=l,0!==(o&S)?t.data!=e.data&&(t.ref.nodeValue=e.data):0!==(o&(D|P|G))&&(t.attrs!==e.attrs&&v(t.attrs,e.attrs,l),t.style!==e.style&&y(t.style,e.style,l.style),0!==(o&D)?t.classes!==e.classes?(null==e.data&&(s=e.type,null!=e.classes&&(r=e.classes.join(" "),s=null==s?r:s+" "+r),e.data=s),t.data!==e.data&&(l.className=null==e.data?"":s)):e.data=t.data:t.classes!==e.classes&&k(t.classes,e.classes,l.classList),0!==(o&P)?(i=e.cref=t.cref,i.updateData(e.data),i.updateChildren(e.children),i.update()):N(t,t.children,e.children,n))}function v(t,e,n){var r,s,i,l,o,a;if(null!=t)if(null==e)for(l=Object.keys(t),r=0,s=l.length;s>r;r++)n.removeAttribute(l[r]);else{for(l=Object.keys(t),r=0,s=l.length;s>r;r++)i=l[r],e.hasOwnProperty(i)?(o=t[i],a=e[i],o!==a&&n.setAttribute(i,a)):n.removeAttribute(i);for(l=Object.keys(e),r=0,s=l.length;s>r;r++)i=l[r],t.hasOwnProperty(i)||n.setAttribute(i,e[i])}else if(null!=e)for(l=Object.keys(e),r=0,s=l.length;s>r;r++)i=l[r],n.setAttribute(i,e[i])}function y(t,e,n){var r,s,i,l;if(null!=t)if(null==e)for(l=Object.keys(t),r=0,s=l.length;s>r;r++)n.removeProperty(l[r]);else{for(l=Object.keys(t),r=0,s=l.length;s>r;r++)i=l[r],e.hasOwnProperty(i)?n.setProperty(i,e[i],""):n.removeProperty(i);for(l=Object.keys(e),r=0,s=l.length;s>r;r++)i=l[r],t.hasOwnProperty(i)||n.setProperty(i,e[i],"")}else if(null!=e)for(l=Object.keys(e),r=0,s=l.length;s>r;r++)i=l[r],n.setProperty(i,e[i],"")}function k(t,e,n){var r,s,i,l;if(null!=t&&0!==t.length)if(null==e||0===e.length)for(r=0;r<t.length;r++)n.remove(t[r]);else if(1===t.length&&1===e.length)s=t[0],i=e[0],s!==i&&(n.remove(s),n.add(i));else if(1===t.length){for(s=t[0],l=-1,r=0;r<e.length;r++){if(i=e[r],s===i){l=r;break}n.add(i)}if(-1!==l)for(r=l+1;r<e.length;r++)n.add(e[r]);else n.remove(s)}else if(1===e.length){for(i=e[0],l=-1,r=0;r<t.length;r++){if(s=t[r],s===i){l=r;break}n.remove(s)}if(-1!==l)for(r=l+1;r<t.length;r++)n.remove(t[r]);else n.add(i)}else{for(var o,a=0,u=0,f=t.length-1,h=e.length-1,c=!1;f>=a&&h>=u&&t[a]===e[u];)a++,u++;for(;f>=a&&h>=u&&t[f]===e[h];)f--,h--;var d=new Array(h-u+1);for(r=a;f>=r;r++){for(s=t[r],c=!0,o=u;h>=o;o++)if(i=e[o],s==i){c=!1,d[o-u]=!0;break}c&&n.remove(s)}for(r=u;h>=r;r++)d[r-u]||n.add(e[r])}else if(null!=e&&e.length>0)for(r=0;r<e.length;r++)n.add(e[r])}function m(t,e,n,r){d(e,r),t.ref.insertBefore(e.ref,n),0!==(r.flags&V)&&x(e),p(e,r)}function w(t,e,n){t.ref.insertBefore(e.ref,n)}function b(t,e){t.ref.removeChild(e.ref),T(e)}function T(t){if(0!==(t.flags&P))t.cref.dispose();else if(null!=t.children)for(var e=0;e<t.children.length;e++)T(t.children[e])}function _(t){if(x(t),0===(t.flags&P)&&null!=t.children)for(var e=0;e<t.children.length;e++)_(t.children[e])}function O(t){if(0===(t.flags&P)&&null!=t.children)for(var e=0;e<t.children.length;e++)_(t.children[e]);F(t)}function x(t){0!==(t.flags&P)&&t.cref.attach()}function F(t){0!==(t.flags&P)&&t.cref.detach()}function N(t,e,n,r){var s,i,l=0,o=!1;if(null!=e&&0!==e.length)if(null==n||0===n.length)for(;l<e.length;)b(t,e[l++]);else if(1===e.length&&1===n.length)s=e[0],i=n[0],null==s.key&&c(s,i)||null!=s.key&&s.key===i.key?g(s,i,r):(b(t,s),m(t,i,null,r));else if(1===e.length){if(s=e[0],null==s.key)for(;l<n.length;){if(i=n[l++],c(s,i)){g(s,i,r),o=!0;break}m(t,i,s.ref,r)}else for(;l<n.length;){if(i=n[l++],s.key===i.key){g(s,i,r),o=!0;break}m(t,i,s.ref,r)}if(o)for(;l<n.length;)m(t,n[l++],null,r);else b(t,s)}else if(1===n.length){if(i=n[0],null==i.key)for(;l<e.length;){if(s=e[l++],c(s,i)){g(s,i,r),o=!0;break}b(t,s)}else for(;l<e.length;){if(s=e[l++],s.key===i.key){g(s,i,r),o=!0;break}b(t,s)}if(o)for(;l<e.length;)b(t,e[l++]);else m(t,i,null,r)}else null==e[0].key?C(t,e,n,r):E(t,e,n,r);else if(null!=n&&n.length>0)for(l=0;l<n.length;l++)m(t,n[l],null,r)}function C(t,e,n,r){for(var s,i,l,o,a=0,u=0,f=e.length-1,h=n.length-1;f>=a&&h>=u&&(s=e[a],i=n[u],c(s,i));)a++,u++,g(s,i,r);for(;f>=a&&h>=u&&(s=e[f],i=n[h],c(s,i));)f--,h--,g(s,i,r);for(;f>=a&&h>=u;)s=e[a++],i=n[u++],c(s,i)?g(s,i,r):(m(t,i,s.ref,r),b(t,s));for(;f>=a;)b(t,e[a++]);for(l=h+1,o=l<n.length?n[l].ref:null;h>=u;)m(t,n[u++],o,r)}function E(t,e,n,r){var s,i,l,o,a,u,f,h,c=0,d=0,p=e.length-1,v=n.length-1,y=e[c],k=n[d],T=e[p],_=n[v],O=!1,x=0;t:do{for(O=!0;y.key===k.key;){if(g(y,k,r),c++,d++,c>p||d>v)break t;y=e[c],k=n[d],O=!1}for(;T.key===_.key;){if(g(T,_,r),p--,v--,c>p||d>v)break t;T=e[p],_=n[v],O=!1}for(;y.key===_.key;){if(g(y,_,r),l=v+1,o=l<n.length?n[l].ref:null,w(t,_,o),c++,v--,c>p||d>v)break t;y=e[c],_=n[v],O=!1;continue t}for(;T.key===k.key;){if(g(T,k,r),w(t,k,y.ref),p--,d++,c>p||d>v)break t;T=e[p],k=n[d],O=!1}}while(!O&&p>=c&&v>=d);if(c>p)for(l=v+1,o=l<n.length?n[l].ref:null;v>=d;)m(t,n[d++],o,r);else if(d>v)for(;p>=c;)b(t,e[c++]);else{var F=p-c+1,N=v-d+1,C=new Array(N);for(s=0;N>s;s++)C[s]=-1;var E=!1,q=0;if(16>=F*N)for(s=c;p>=s;s++){var M=!0;for(a=e[s],i=d;v>=i;i++)if(u=n[i],a.key===u.key){C[i-d]=s,x>i?E=!0:x=i,g(a,u,r),M=!1;break}M&&(b(t,a),q++)}else{var j={};for(s=d;v>=s;s++)h=n[s],j[h.key]=s;for(s=c;p>=s;s++)a=e[s],i=j[a.key],void 0!==i?(u=n[i],C[i-d]=s,x>i?E=!0:x=i,g(a,u,r)):(b(t,a),q++)}if(E){var S=A(C);for(i=S.length-1,s=N-1;s>=0;s--)-1===C[s]?(f=s+d,h=n[f],l=f+1,o=l<n.length?n[l].ref:null,m(t,h,o,r)):0>i||s!=S[i]?(f=s+d,h=n[f],l=f+1,o=l<n.length?n[l].ref:null,w(t,h,o)):i--}else if(F-q!=N)for(s=N-1;s>=0;s--)-1===C[s]&&(f=s+d,h=n[f],l=f+1,o=l<n.length?n[l].ref:null,m(t,h,o,r))}}function A(t){var e,n,r,s,i,l,o=t.slice(0),a=[0];for(e=0,n=t.length;n>e;e++)if(-1!==t[e])if(r=a[a.length-1],t[r]<t[e])o[e]=r,a.push(e);else{for(s=0,i=a.length-1;i>s;)l=(s+i)/2|0,t[a[l]]<t[e]?s=l+1:i=l;t[e]<t[a[s]]&&(s>0&&(o[e]=a[s-1]),a[s]=e)}for(s=a.length,i=a[s-1];s-->0;)a[s]=i,i=o[i];return a}function q(t,e,n){this.flags=L,this.rev=-1,this.depth=null==t?0:t.depth+1,this.parent=t,this.data=e,this.children=n,this.root=null,this.element=null,this._update=null,this._invalidate=null}function M(t,e){t.create(),t.init(),e.appendChild(t.element),t.attach(),t.update()}var j=(t("./scheduler"),t("./env")),S=1,D=2,P=4,G=8,R=16;n.TEXT=S,n.ELEMENT=D,n.COMPONENT=P,n.ROOT=G,n.SVG=R;var L=1,V=2,I=3,U=4,$=L|V;q.DIRTY=L,q.ATTACHED=V,q.SVG=I,q.MOUNTING=U,q.SHOULD_UPDATE_VIEW_FLAGS=$,q.prototype.tag="div",q.prototype.create=function(){this.element=document.createElement(this.tag)},q.prototype.mount=function(t){this.flags|=U,this.element=t},q.prototype.init=function(){},q.prototype.updateData=function(t){this.data!==t&&(this.data=t,this.invalidate())},q.prototype.updateChildren=function(t){this.children!==t&&(this.children=t,this.invalidate())},q.prototype.update=function(){(this.flags&$)==$&&(this.updateState()&&this.updateView(),this.rev=j.scheduler.clock,this.flags&=~L,this.updated())},q.prototype.updateState=function(){return!0},q.prototype.updateView=function(){},q.prototype.updateRoot=function(t){null==this.root?(t.cref=this,0!==(this.flags&U)?(vNodeMount(this.element,this),this.flags&=~U):(t.ref=this.element,p(t,this))):g(this.root,t,this),this.root=t},q.prototype.invalidate=function(){if(0===(this.flags&L)){var t=j.scheduler;this.flags|=L,null==this._update&&(this._update=this.update.bind(this)),t.nextFrame().write(this._update,this.depth),this.cancelTransientSubs(),this.invalidated()}},q.prototype.dispose=function(){null!=this.root&&this.root.dispose(),0!==(this.flags&V)&&(this.flags|=V,this.detached()),this.cancelTransientSubs(),this.cancelSubs(),this.disposed()},q.prototype.attach=function(){this.flags|=V,this.attached(),null!=this.root&&_(this.root)},q.prototype.detach=function(){null!=this.root&&O(this.root),this.flags&=~V,this.detached()},q.prototype.invalidated=function(){},q.prototype.updated=function(){},q.prototype.attached=function(){},q.prototype.detached=function(){},q.prototype.disposed=function(){},q.prototype.cancelSubs=function(){},q.prototype.cancelTransientSubs=function(){},e.exports={VNode:n,Component:q,create:d,render:p,update:g,attach:_,detach:O,attached:x,detached:F,t:r,$t:s,e:i,$e:l,s:o,$s:a,c:u,$c:f,r:h,injectComponent:M}},{"./env":2,"./scheduler":4}],7:[function(t,e){"use strict";function n(t){if(!t)return"";var e=parseFloat(t).toFixed(2);if(t>60){var n=Math.floor(t/60),r=(value%60).toFixed(2).split("."),s=r[0].lpad("0",2),i=r[1];e=n+":"+s+"."+i}return e}function r(t,e,n){i.Component.call(this,t,e,n)}var s=t("kivi"),i=s.vdom,l=t("./popover"),o=["label-important"],a=["label-warning"],u=["label-success"];s.inherits(r,i.Component),r.prototype.tag="tr",r.prototype.updateView=function(){var t=this.data.db,e=t.getTopFiveQueries(),r=i.e("td");r.type="dbname",r.children=[i.t(t.name)];var s=t.queries.length,f=i.e("span");f.type="label",f.children=[i.t(s)],f.classes=s>=20?o:s>=10?a:u;var h=i.e("td");h.type="query-count",h.children=[f];for(var c=[r,h],d=0;5>d;d++){var p=e[d],g=p.elapsed,v=i.t(n(g)),y=i.c(l,{query:p.query}),k=i.e("td");k.type="Query";var m=[];m.push("elapsed"),m.push(g>=10?"warn_long":g>=1?"warn":"short"),k.classes=m,k.children=[v,y],c.push(k)}var w=i.r();w.children=c,this.updateRoot(w)},e.exports=r},{"./popover":9,kivi:3}],8:[function(t,e){"use strict";function n(t,e,n){s.Component.call(this,t,e,n)}var r=t("kivi"),s=r.vdom,i=t("./entry"),l=["table","table-striped","latest-data"];r.inherits(n,s.Component),n.prototype.tag="table",n.prototype.updateView=function(){for(var t=this.data,e=[],n=0;n<t.length;n++){var r=t[n];e.push(s.$c(r.id,i,{db:r}))}var o=s.e("tbody");o.children=e;var a=s.r();a.classes=l,a.children=[o],this.updateRoot(a)},e.exports=n},{"./entry":7,kivi:3}],9:[function(t,e){"use strict";function n(t,e,n){s.Component.call(this,t,e,n)}var r=t("kivi"),s=r.vdom,i=["popover","left"];r.inherits(n,s.Component),n.prototype.updateView=function(){var t=s.e("div");t.type="popover-content",t.children=[s.t(this.data.query)];var e=s.e("div");e.type="arrow";var n=s.r();n.classes=i,n.children=[t,e],this.updateRoot(n)},e.exports=n},{kivi:3}],10:[function(t,e){"use strict";function n(t,e,n){this.elapsed=t,this.waiting=e,this.query=n}function r(t){this.id=s++,this.name=t,this.queries=null,this.update()}n.rand=function(){var t=15*Math.random(),e=Math.random()<.5,r="SELECT blah FROM something";return Math.random()<.2&&(r="<IDLE> in transaction"),Math.random()<.1&&(r="vacuum"),new n(t,e,r)};var s=0;r.prototype.update=function(){for(var t=[],e=Math.floor(10*Math.random()+1),r=0;e>r;r++)t.push(n.rand());this.queries=t},r.prototype.getTopFiveQueries=function(){var t=this.queries.slice();for(t.sort(function(t,e){return t.elapsed-e.elapsed}),t=t.slice(0,5);t.length<5;)t.push(new n(0,!1,""));return t},e.exports={Query:n,Database:r}},{}]},{},[1]);
//# sourceMappingURL=main.js.map