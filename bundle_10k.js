(function(){'use strict';var p;function aa(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c]}
function r(a,b,d){120!==b.charCodeAt(0)?a.setAttribute(b,d):109===b.charCodeAt(1)&&108===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",b,d):108===b.charCodeAt(1)&&105===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/1999/xlink",b,d):a.setAttribute(b,d)}function u(a,b,d){this.a=a;this.i=b;this.h=null;this.f=d;this.s=this.b=this.g=this.l=this.m=this.j=null}p=u.prototype;p.key=function(a){this.h=a;return this};p.u=function(a){this.f=a;return this};
p.data=function(a){this.f=a;return this};p.style=function(a){this.m=a;return this};p.className=function(a){this.l=a;return this};p.children=function(a){this.g=a;return this};p.value=function(a){this.a|=64;this.g=a;return this};p.checked=function(a){this.a|=128;this.g=a;return this};function v(a){if(0===(a.a&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)v(a[b])}else w(a.s)}
function x(a){if(0===(a.a&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)x(a[b])}else a.s.detach()}function y(a){if(0===(a.a&256))if(0!==(a.a&4)){a=a.s;a.c|=1;null!==a.v&&0===(a.c&65536)&&y(a.v);0!==(a.c&2)&&ba(a);var b=a.A.ha;null!==b&&b(a,a.u,a.state)}else{if(null!==a.g&&(a=a.g,"string"!==typeof a))for(b=0;b<a.length;b++)y(a[b])}else x(a)}
function ca(a,b){var d=a.a;0!==(d&1)?a.b=document.createTextNode(a.f):0!==(d&2)?a.b=0===(d&131072)?0===(d&32768)?document.createElement(a.i):document.createElementNS("http://www.w3.org/2000/svg",a.i):a.i.createElement():0===(d&256)&&(b=da(a.i,b,a.f),a.b=b.element,a.s=b)}
function A(a,b){var d,c,e,g,f=a.a,h;if(0!==(f&10)){h=a.b;if(0===(f&262144)){var l=a.f;if(null!==l)for(g=Object.keys(l),d=0,c=g.length;d<c;d++)e=g[d],h[e]=l[e];if(null!==a.j)for(g=Object.keys(a.j),d=0,c=g.length;d<c;d++)e=g[d],r(h,e,a.j[e]);null!==a.m&&(0===(f&32768)?h.style.cssText=a.m:h.setAttribute("style",a.m));null!==a.l&&(0===(f&32768)?h.className=a.l:h.setAttribute("class",a.l))}else 0===(f&8)?a.i.w(h,void 0,a.f):b.A.i.w(h,void 0,a.f);e=a.g;if(null!==e)if(0===(a.a&2048))if(0===(a.a&192))if("string"===
typeof e)h.textContent=e;else for(d=0,c=e.length;d<c;d++)B(a,e[d],null,b);else 0!==(a.a&64)?a.b.value=a.g:a.b.checked=a.g;else h.innerHTML=e}else 0!==(f&4)&&C(a.s)}function B(a,b,d,c){a=a.b;null===b.b?(ca(b,c),0!==(b.a&4)&&w(b.s),A(b,c),a.insertBefore(b.b,d)):(a.insertBefore(b.b,d),v(b),C(b.s,0===(b.a&512)?b.f:null))}function ea(a,b,d,c){a=a.b;null===b.b?(ca(b,c),0!==(b.a&4)&&w(b.s),A(b,c),a.replaceChild(b.b,d.b)):(a.replaceChild(b.b,d.b),v(b),C(b.s,0===(b.a&512)?b.f:null));y(d)}
function D(a,b){a.b.removeChild(b.b);y(b)}function E(a,b){a.b.textContent="";for(a=0;a<b.length;a++)y(b[a])}
function F(a,b,d){var c=a.b,e=a.a,g;b.b=a.b;if(0!==(e&1))a.f!==b.f&&(a.b.nodeValue=b.f);else if(0!==(e&10)){if(0===(e&262144)){if(a.f!==b.f){g=a.f;var f=b.f,h=Object.keys(g),l,m;for(m=0;m<h.length;m++){l=h[m];var k=f[l];g[l]!==k&&(c[l]=k)}}if(a.j!==b.j)if(0===(a.a&32))for(g=a.j,f=b.j,h=Object.keys(g),m=0;m<h.length;m++)l=h[m],k=f[l],g[l]!==k&&r(c,l,k);else if(g=a.j,f=b.j,null!==g)if(null===f)for(l=Object.keys(g),h=0;h<l.length;h++)c.removeAttribute(l[h]);else{l=Object.keys(g);for(h=0;h<l.length;h++)m=
l[h],f.hasOwnProperty(m)?(k=f[m],g[m]!==k&&r(c,m,k)):c.removeAttribute(m);l=Object.keys(f);for(h=0;h<l.length;h++)m=l[h],g.hasOwnProperty(m)||r(c,m,f[m])}else if(null!==f)for(l=Object.keys(f),h=0;h<l.length;h++)m=l[h],r(c,m,f[m]);a.m!==b.m&&(g=null===b.m?"":b.m,0===(e&32768)?c.style.cssText=g:c.setAttribute("style",g));a.l!==b.l&&(g=null===b.l?"":b.l,0===(e&32768)?c.className=g:c.setAttribute("class",g))}else a.f!==b.f&&(0===(e&8)?a.i.w(c,a.f,b.f):d.A.i.w(c,a.f,b.f));if(0===(a.a&192)){if(a.g!==b.g)if(0===
(a.a&2048))if(e=a.g,b=b.g,c=0,h=!1,"string"===typeof e)if(null===b)a.b.removeChild(a.b.firstChild);else if("string"===typeof b)(d=a.b.firstChild)?d.nodeValue=b:a.b.textContent=b;else for(a.b.removeChild(a.b.firstChild);c<b.length;)B(a,b[c++],null,d);else if("string"===typeof b){if(null!==e)for(;c<e.length;)y(e[c++]);a.b.textContent=b}else if(null!==e&&0!==e.length)if(null===b||0===b.length)E(a,e);else if(1===e.length&&1===b.length)g=e[0],f=b[0],G(g,f)?F(g,f,d):ea(a,f,g,d);else if(1===e.length){g=
e[0];if(0===(a.a&16))for(;c<b.length;){f=b[c++];if(G(g,f)){F(g,f,d);h=!0;break}B(a,f,g.b,d)}else for(;c<b.length;){f=b[c++];if(g.h===f.h){F(g,f,d);h=!0;break}B(a,f,g.b,d)}if(h)for(;c<b.length;)B(a,b[c++],null,d);else D(a,g)}else if(1===b.length){f=b[0];if(0===(a.a&16))for(;c<e.length;){if(g=e[c++],G(g,f)){F(g,f,d);h=!0;break}}else for(;c<e.length;)if(g=e[c++],g.h===f.h){F(g,f,d);h=!0;break}if(h){d=0;for(c--;d<c;)D(a,e[d++]);for(c++;c<e.length;)D(a,e[c++])}else E(a,e),B(a,f,null,d)}else if(0===(a.a&
16)){c=f=0;h=e.length-1;for(g=b.length-1;f<=h&&c<=g;){l=e[f];m=b[c];if(!G(l,m))break;f++;c++;F(l,m,d)}for(;f<=h&&c<=g;){l=e[h];m=b[g];if(!G(l,m))break;h--;g--;F(l,m,d)}for(;f<=h&&c<=g;)l=e[f++],m=b[c++],G(l,m)?F(l,m,d):ea(a,m,l,d);if(f<=h){do D(a,e[f++]);while(f<=h)}else if(c<=g){e=g+1;e=e<b.length?b[e].b:null;do B(a,b[c++],e,d);while(c<=g)}}else{c=h=0;l=e.length-1;m=b.length-1;f=e[h];g=b[c];var k=e[l],n=b[m],q,I;a:do{for(;f.h===g.h;){F(f,g,d);h++;c++;if(h>l||c>m)break a;f=e[h];g=b[c]}for(;k.h===
n.h;){F(k,n,d);l--;m--;if(h>l||c>m)break a;k=e[l];n=b[m]}if(f.h===n.h){F(f,n,d);f=m+1;f=f<b.length?b[f].b:null;a.b.insertBefore(n.b,f);h++;m--;if(h>l||c>m)break a;f=e[h];n=b[m];continue a}if(k.h===g.h){F(k,g,d);a.b.insertBefore(g.b,f.b);l--;c++;if(h>l||c>m)break a;k=e[l];g=b[c]}}while(0);if(h>l)for(f=m+1,f=f<b.length?b[f].b:null;c<=m;)B(a,b[c++],f,d);else if(c>m)for(;h<=l;)D(a,e[h++]);else{var V=l-h+1,f=m-c+1;g=Array(f);for(k=0;k<f;k++)g[k]=-1;var W=!1,t=0,z=0;if(4>=f||16>=V*f)for(k=h;k<=l;k++){if(q=
e[k],z<f)for(n=c;n<=m;n++)if(I=b[n],q.h===I.h){g[n-c]=k;t>n?W=!0:t=n;F(q,I,d);z++;e[k]=null;break}}else{for(var ma=new Map,k=c;k<=m;k++)q=b[k],ma.set(q.h,k);for(k=h;k<=l;k++)q=e[k],z<f&&(n=ma.get(q.h),void 0!==n&&(I=b[n],g[n-c]=k,t>n?W=!0:t=n,F(q,I,d),z++,e[k]=null))}if(V===e.length&&0===z)for(E(a,e);c<f;)B(a,b[c++],null,d);else{for(k=V-z;0<k;)q=e[h++],null!==q&&(D(a,q),k--);if(W){h=g.slice(0);e=[];e.push(0);l=0;for(m=g.length;l<m;l++)if(-1!==g[l])if(k=e[e.length-1],g[k]<g[l])h[l]=k,e.push(l);else{k=
0;for(n=e.length-1;k<n;)q=(k+n)/2|0,g[e[q]]<g[l]?k=q+1:n=q;g[l]<g[e[k]]&&(0<k&&(h[l]=e[k-1]),e[k]=l)}k=e.length;for(n=e[k-1];0<k--;)e[k]=n,n=h[n];n=e.length-1;for(k=f-1;0<=k;k--)-1===g[k]?(t=k+c,q=b[t],f=t+1,f=f<b.length?b[f].b:null,B(a,q,f,d)):0>n||k!==e[n]?(t=k+c,q=b[t],f=t+1,f=f<b.length?b[f].b:null,a.b.insertBefore(q.b,f)):n--}else if(z!==f)for(k=f-1;0<=k;k--)-1===g[k]&&(t=k+c,q=b[t],f=t+1,f=f<b.length?b[f].b:null,B(a,q,f,d))}}}else{if(null!==b&&0<b.length)for(c=0;c<b.length;c++)B(a,b[c],null,
d)}else c.innerHTML=b.g}else 0!==(e&64)?c.value!==b.g&&(c.value=b.g):c.checked!==b.g&&(c.checked=b.g)}else d=b.s=a.s,0!==(e&1024)&&a.f===b.f||C(d,0===(e&512)?b.f:void 0)}function G(a,b){return a.a===b.a&&a.i===b.i&&a.h===b.h}function H(){this.o=4;this.a=0;this.i="div";this.ha=this.ga=this.da=this.U=this.T=this.w=this.ia=null}H.prototype.tagName=function(a){this.i=a;return this};H.prototype.canvas=function(){this.o|=65536;this.a|=65536;this.i="canvas";return this};
H.prototype.update=function(a){this.w=a;return this};H.prototype.Z=function(a){return new u(4,this,void 0===a?null:a)};function da(a,b,d){var c;c=0===(a.a&131072)?0===(a.a&32768)?document.createElement(a.i):document.createElementNS("http://www.w3.org/2000/svg",a.i):a.i.createElement();b=new fa(a.o,a,c,b,d);0!==(a.a&1)&&(c.na=b);null!==a.T&&(b.state=a.T(b,b.u));null!==a.U&&a.U(b,b.u,b.state);return b}
function fa(a,b,d,c,e){this.c=a;this.la=0;this.A=b;this.element=d;this.depth=void 0===c?0:c.depth+1;this.u=void 0===e?null:e;this.state=null;this.v=0===(a&65536)?null:d.getContext("2d");this.Y=this.W=null}p=fa.prototype;p.K=function(){return 0===(this.c&131072)?new u(8,null,null):this.A.i.K()};p.update=function(a){C(this,a)};function ga(a,b){null===a.v?(b.s=a,b.b=a.element,A(b,a)):F(a.v,b,a);a.v=b}
p.J=function(a,b){this.c|=void 0===a?8:a;0===(this.c&5)&&(this.c|=4,(void 0===b?0:b)||J(this),ha(ia(),this))};function w(a){ja(a);null!==a.v&&0===(a.c&65536)&&v(a.v)}p.detach=function(){null!==this.v&&0===(this.c&65536)&&x(this.v);ba(this)};p.subscribe=function(a){return a.ma(this)};
function C(a,b){if(void 0!==b&&0===(a.c&1024)){var d=a.u,c=a.A.ia;null!==c?c(a,d,b):0===(a.c&4)&&(a.c|=4,J(a));a.u=b}6===(a.c&6)&&(0===(K&8)||0!==(K&32)||0!==(a.c&256)||0<ka()?(a.A.w(a,a.u,a.state),a.la=L,a.c&=-133):ha(ia(),a))}function ja(a){a.c|=2;var b=a.A.da;null!==b&&b(a,a.u,a.state)}function ba(a){0!==(a.c&512)&&(la--,0===la&&(K&=-9,M=0));a.c&=-531;for(var b=a.W;null!==b;)b.ea(),b=b.fa;a.W=null;J(a);b=a.A.ga;null!==b&&b(a,a.u,a.state)}
function J(a){for(var b=a.Y;null!==b;)b.ea(),b=b.fa;a.Y=null}function na(a){var b=document.getElementById("app");a=da(oa,void 0,a);b.appendChild(a.element);ja(a);C(a);return a}function N(){this.a=0;this.G=[];this.C=this.S=this.H=this.I=null}function ha(a,b){if(0===(b.c&128)){b.c|=128;var d=b.depth;for(a.a|=1;d>=a.G.length;)a.G.push(null);var c=a.G[d];null===c?a.G[d]=[b]:c.push(b)}}N.prototype.write=function(a){this.a|=2;null===this.I&&(this.I=[]);this.I.push(a)};
N.prototype.read=function(a){this.a|=4;null===this.H&&(this.H=[]);this.H.push(a)};N.prototype.focus=function(a){this.C=a};var K=0,L=0,O=[],pa=[],qa=new N,P=new N,Q=[],ra=document.createTextNode(""),sa="__kivi"+Math.random(),la=0,R=6,ta=60,S=0,ua=0,M=0;(new MutationObserver(va)).observe(ra,{characterData:!0});window.addEventListener("message",wa);function xa(){0===(K&4)&&(K|=4,requestAnimationFrame(ya))}
function wa(a){if(a.source===window&&a.data===sa){K&=-3;a=pa;pa=[];for(var b=0;b<a.length;b++)a[b]();L++}}
function ya(a){var b;K&=-21;0!==(K&8)&&(0<M&&(ta+=.0165*(1E3/(a-M)-ta),S+=55>ta?-1:1,5<S?(S=0,R+=.1):-5>S&&(S=0,R*=.66),6<R?R=6:2>R&&(R=2)),M=a,ua=a+R,xa());var d=P;P=qa;qa=d;for(a=0;a<Q.length;a++)Q[a].c|=4;do{for(;0!==(d.a&4);)for(d.a&=-5,b=d.H,d.H=null,a=0;a<b.length;a++)b[a]();for(;0!==(d.a&3);){if(0!==(d.a&1)){d.a&=-2;var c=d.G;for(a=0;a<c.length;a++){var e=c[a];if(null!==e)for(c[a]=null,b=0;b<e.length;b++)C(e[b])}}if(0!==(d.a&2))for(d.a&=-3,b=d.I,d.I=null,a=0;a<b.length;a++)b[a]()}a=0;for(b=
Q.length;a<b;)c=Q[a++],0===(c.c&16)?(c.c&=-33,a===b?Q.pop():Q[--a]=Q.pop()):C(c)}while(0!==(d.a&7));for(;0!==(d.a&8);)for(d.a&=-9,b=d.S,d.S=null,a=0;a<b.length;a++)b[a]();null!==d.C&&(d.C.constructor===u?d.C.b.focus():d.C.focus(),d.C=null);0<Q.length&&xa();L++}function va(){for(;0<O.length;){var a=O;O=[];for(var b=0;b<a.length;b++)a[b]();L++}K&=-2}function ia(){xa();return P}function ka(){if(0!==(K&16))return 0;var a=ua-performance.now();return 0>=a?(K|=16,0):a}
function za(a){this.o=131072;this.a=0;this.X=a;this.V=this.w=this.l=this.m=this.j=this.f=null}p=za.prototype;p.u=function(a){this.f=a;return this};p.style=function(a){this.m=a;return this};p.className=function(a){this.l=a;return this};p.update=function(a){this.o|=262144;this.w=a;return this};p.Z=function(a){return new u(2|this.o,this,void 0===a?null:a)};p.K=function(a){return new u(8|this.o,this,void 0===a?null:a)};
p.createElement=function(){var a,b,d,c=this.V;if(null===c){c=0===(this.a&32768)?document.createElement(this.X):document.createElementNS("http://www.w3.org/2000/svg",this.X);if(null!==this.f)for(b=Object.keys(this.f),a=0;a<b.length;a++)d=b[a],c[d]=this.f[d];if(null!==this.j)for(b=Object.keys(this.j),a=0;a<b.length;a++)d=b[a],r(c,d,this.j[d]);null!==this.m&&(0===(this.a&32768)?c.style.cssText=this.m:c.setAttribute("style",this.m));null!==this.l&&(0===(this.a&32768)?c.className=this.l:c.setAttribute("class",
this.l));return 0!==(this.a&1)?(this.V=c,c.cloneNode(!1)):c}return c.cloneNode(!1)};function Aa(a,b,d,c){this.min=a;this.max=b;this.aa=d;this.$=c}function Ba(){this.F=[];this.ka=100;this.B=-1}function Ca(a,b){a.B=(a.B+1)%a.ka;a.F[a.B]=b}function Da(a,b){for(var d=a.F,c=0;c<d.length;c++)b(d[(a.B+1+c)%d.length],c)}
function Ea(a){var b=a.F;if(0===b.length)return new Aa(0,0,0,0);for(var d=b[(a.B+1)%b.length],c=d,e=0,g=0;g<b.length;g++){var f=b[(a.B+1+g)%b.length];f<d&&(d=f);f>c&&(c=f);e+=f}return new Aa(d,c,e/b.length,b[a.B])}var Fa=[],Ga=-1;function Ha(a){Fa.push(a);-1===Ga&&requestAnimationFrame(function(){Ga=-1;var a=Fa;Fa=[];for(var d=0;d<a.length;d++)a[d]()})}
function T(a){var b=this;this.ja=function(){b.ba();b.R=!1};this.name=a;this.element=document.createElement("div");this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0";this.R=!1;this.J()}T.prototype.J=function(){this.R||(this.R=!0,Ha(this.ja))};T.prototype.ba=function(){throw Error("sync method not implemented");};
function U(a,b,d,c){T.call(this,a);this.c=b;this.P=d;this.F=c;a=document.createElement("div");a.style.cssText="text-align: center";a.textContent=this.name;d=document.createElement("div");0===(b&1)?(this.O=document.createElement("div"),d.appendChild(this.O)):this.O=null;0===(b&2)?(this.M=document.createElement("div"),d.appendChild(this.M)):this.M=null;0===(b&4)?(this.N=document.createElement("div"),d.appendChild(this.N)):this.N=null;0===(b&8)?(this.L=document.createElement("div"),d.appendChild(this.L)):
this.L=null;this.element.appendChild(a);this.element.appendChild(d);0===(b&16)?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=100,this.canvas.height=30,this.D=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):this.D=this.canvas=null}aa(U,T);
U.prototype.ba=function(){var a=this,b=Ea(this.F),d=30/(1.2*b.max),c,e,g;0===(this.c&32)?(c=b.min.toFixed(2),e=b.max.toFixed(2),g=b.aa.toFixed(2),b=b.$.toFixed(2)):(c=Math.round(b.min).toString(),e=Math.round(b.max).toString(),g=Math.round(b.aa).toString(),b=Math.round(b.$).toString());null!==this.O&&(this.O.textContent="min: \u00a0"+c+this.P);null!==this.M&&(this.M.textContent="max: \u00a0"+e+this.P);null!==this.N&&(this.N.textContent="mean: "+g+this.P);null!==this.L&&(this.L.textContent="last: "+
b+this.P);null!==this.D&&(this.D.fillStyle="#010",this.D.fillRect(0,0,100,30),this.D.fillStyle="#0f0",Da(this.F,function(b,c){a.D.fillRect(c,30,1,-(b*d))}))};var X=null;function Ia(){X||(X=document.createElement("div"),X.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(X))}
function Ja(){function a(f){0<e&&(g+=c*(1E3/(f-e)-g));e=f;Ca(b,g);d.J();requestAnimationFrame(a)}Ia();var b=new Ba,d=new U("FPS",39,"",b);X.appendChild(d.element);var c=2/121,e=0,g=60;requestAnimationFrame(a)}function Ka(){function a(){Ca(b,Math.round(performance.memory.usedJSHeapSize/1048576));d.J();setTimeout(a,30)}Ia();if(void 0!==performance.memory){var b=new Ba,d=new U("Memory",5,"MB",b);X.appendChild(d.element);a()}}
function La(a){this.data=new Ba;this.ca=new U(a,0,"ms",this.data);this.startTime=-1}var Y={};function Ma(a){Ia();var b=Y[a];void 0===b&&(Y[a]=b=new La(a),X.appendChild(b.ca.element))}function Na(a){a=Y[a];void 0!==a&&(a.startTime=performance.now())}function Oa(a){var b=performance.now();a=Y[a];void 0!==a&&-1!==a.startTime&&(Ca(a.data,b-a.startTime),a.ca.J())}function Pa(){return"#"+Math.floor(16777215*Math.random()).toString(16)}
function Qa(){for(var a=Array(1E4),b=0;1E4>b;b++)a[b]=Pa();return a}var Ra=(new za("span")).className("pixel").update(function(a,b,d){a.style.backgroundColor=d}),Z=new H;Z.o|=Ra.o;Z.a|=Ra.o;Z.i=Ra;var Sa=Z.update(function(a,b){ga(a,a.K().data(b))}),oa=(new H).update(function(a,b){for(var d=Array(100),c=0;100>c;c++){var e=100*c,g=Array(100);d[c]=(new u(2,"div",null)).className("row").children(g);for(var f=0;100>f;f++)g[f]=Sa.Z(b[e+f])}ga(a,a.K().className("image").children(d))});
document.addEventListener("DOMContentLoaded",function(){function a(){Na("data update");var c=b;if(0<c)if(1===c)for(c=0;1E4>c;c++)e[c]=Pa();else for(var d=0;1E4>d;d++)Math.random()<c&&(e[d]=Pa());Oa("data update");Na("view update");g.update(e);Oa("view update");requestAnimationFrame(a)}Ja();Ka();Ma("data update");Ma("view update");var b=.5,d=document.createElement("div");d.style.margin="0 auto";d.style.width="80%";var c=document.createElement("input");c.type="range";c.style.width="100%";c.addEventListener("change",
function(a){b=Number.parseFloat(a.target.value)/100});d.appendChild(c);document.body.insertBefore(d,document.body.firstChild);var e=Qa(),g=na(e);requestAnimationFrame(a)});}).call();
