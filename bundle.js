(function(){'use strict';var n;function r(a){return"m"===a[2]?"http://www.w3.org/XML/1998/namespace":"http://www.w3.org/1999/xlink"}function t(a,b,c){"$"!==b[0]?a.setAttribute(b,c):a.setAttributeNS(r(b),b.substring(1),c)}function u(a,b){"$"!==b[0]?a.removeAttribute(b):a.removeAttributeNS(r(b),b.substring(1))}function w(a,b,c){this.a=a;this.tag=b;this.l=null;this.c=c;this.h=this.b=this.g=this.i=this.u=this.s=null}n=w.prototype;n.style=function(a){this.u=a;return this};n.className=function(a){this.i=a;return this};
n.children=function(a){this.g=a;return this};n.value=function(a){this.g=a;return this};n.checked=function(a){this.g=a;return this};function x(a,b){return a.a===b.a&&a.tag===b.tag&&null===b.l}
n.create=function(a){var b=this.a;this.a&=-257;0!==(b&1)?this.b=document.createTextNode(this.c):0!==(b&2)?0===(b&524288)?this.b=0===(b&32768)?document.createElement(this.tag):document.createElementNS("http://www.w3.org/2000/svg",this.tag):this.b=this.tag.createElement():(a=y(this.tag,a),this.b=a.element,this.h=a)};
function B(a,b){var c,d,f,g,e=a.a,h;if(0!==(e&10)){h=a.b;if(0===(e&1048576)){var k=a.c;if(null!==k)for(g=Object.keys(k),c=0,d=g.length;c<d;c++)f=g[c],h[f]=k[f];if(null!==a.s)for(g=Object.keys(a.s),c=0,d=g.length;c<d;c++)f=g[c],t(h,f,a.s[f]);null!==a.u&&(0===(e&32768)?h.style.cssText=a.u:h.setAttribute("style",a.u));null!==a.i&&(0===(e&32768)?h.className=a.i:h.setAttribute("class",a.i))}else 0===(e&8)?a.tag.update(h,void 0,a.c):b.o.A.update(h,void 0,a.c);e=a.g;if(null!==e)if(0===(a.a&192))if("string"===
typeof e)h.textContent=e;else for(c=0,d=e.length;c<d;c++)C(a,e[c],null,b);else 0!==(a.a&64)?a.b.value=a.g:a.b.checked=a.g}else 0!==(e&4)&&(c=a.h,h=a.b,null!==a.i&&(0===(e&32768)?h.className=a.i:h.setAttribute("class",a.i)),c.setData(a.c),c.K(a.g),c.update())}
function D(a,b,c){var d=a.a,f=a.g;a.b=b;if(0!==(d&4))f=a.tag,b=a.h=new E(f.w|4,f,c,b),b.setData(a.c),b.K(a.g),b.update();else if(null!==f&&"string"!==typeof f&&0<f.length){for(var d=b.firstChild,g;8===d.nodeType;)g=d,d=d.nextSibling,b.removeChild(g);for(a=0;a<f.length;a++)for(D(f[a],d,c),d=d.nextSibling;8===d.nodeType;)g=d,d=d.nextSibling,b.removeChild(g)}}
n.j=function(a,b){var c=this.b,d=this.a,f;a.b=c;if(0!==(d&1))this.c!==a.c&&(this.b.nodeValue=a.c);else if(0!==(d&10)){if(0===(d&1048576)){if(this.c!==a.c)if(0===(this.a&1024)){f=this.c;var g=a.c,e=Object.keys(f),h,k;for(k=0;k<e.length;k++){h=e[k];var p=g[h];f[h]!==p&&(c[h]=p)}}else if(f=this.c,g=a.c,null!==f)if(null===g)for(h=Object.keys(f),e=0;e<h.length;e++)c[h[e]]=void 0;else{h=Object.keys(f);for(e=0;e<h.length;e++)k=h[e],g.hasOwnProperty(k)?(p=g[k],f[k]!==p&&(c[k]=p)):c[k]=void 0;h=Object.keys(g);
for(e=0;e<h.length;e++)k=h[e],f.hasOwnProperty(k)||(c[k]=g[k])}else if(null!==g)for(h=Object.keys(g),e=0;e<h.length;e++)k=h[e],c[k]=g[k];if(this.s!==a.s)if(0===(this.a&512))for(f=this.s,g=a.s,e=Object.keys(f),k=0;k<e.length;k++)h=e[k],p=g[h],f[h]!==p&&t(c,h,p);else if(f=this.s,g=a.s,null!==f)if(null===g)for(h=Object.keys(f),e=0;e<h.length;e++)u(c,h[e]);else{h=Object.keys(f);for(e=0;e<h.length;e++)k=h[e],g.hasOwnProperty(k)?(p=g[k],f[k]!==p&&t(c,k,p)):u(c,k);h=Object.keys(g);for(e=0;e<h.length;e++)k=
h[e],f.hasOwnProperty(k)||t(c,k,g[k])}else if(null!==g)for(h=Object.keys(g),e=0;e<h.length;e++)k=h[e],t(c,k,g[k]);this.u!==a.u&&(f=null===a.u?"":a.u,0===(d&32768)?c.style.cssText=f:c.setAttribute("style",f));this.i!==a.i&&(f=null===a.i?"":a.i,0===(d&32768)?c.className=f:c.setAttribute("class",f))}else this.c!==a.c&&(0===(d&8)?this.tag.update(c,this.c,a.c):b.o.A.update(c,this.c,a.c));if(0===(this.a&192)){if(this.g!==a.g)if(d=this.g,c=a.g,e=0,h=!1,"string"===typeof d)if(null===c)this.b.removeChild(this.b.firstChild);
else if("string"===typeof c)(d=this.b.firstChild)?d.nodeValue=c:this.b.textContent=c;else for(this.b.removeChild(this.b.firstChild);e<c.length;)C(this,c[e++],null,b);else if("string"===typeof c){if(null!==d)for(;e<d.length;)F(this,d[e++],b);this.b.textContent=c}else if(null!==d&&0!==d.length)if(null===c||0===c.length)for(;e<d.length;)F(this,d[e++],b);else if(1===d.length&&1===c.length)f=d[0],g=c[0],x(f,g)?f.j(g,b):G(this,g,f,b);else if(1===d.length){f=d[0];if(0===(this.a&16))for(;e<c.length;){g=c[e++];
if(x(f,g)){f.j(g,b);h=!0;break}C(this,g,f.b,b)}else for(;e<c.length;){g=c[e++];if(f.l===g.l){f.j(g,b);h=!0;break}C(this,g,f.b,b)}if(h)for(;e<c.length;)C(this,c[e++],null,b);else F(this,f,b)}else if(1===c.length){g=c[0];if(0===(this.a&16))for(;e<d.length;){f=d[e++];if(x(f,g)){f.j(g,b);h=!0;break}F(this,f,b)}else for(;e<d.length;){f=d[e++];if(f.l===g.l){f.j(g,b);h=!0;break}F(this,f,b)}if(h)for(;e<d.length;)F(this,d[e++],b);else C(this,g,null,b)}else if(0===(this.a&16)){f=e=0;h=d.length-1;for(g=c.length-
1;e<=h&&f<=g;){k=d[e];p=c[f];if(!x(k,p))break;e++;f++;k.j(p,b)}for(;e<=h&&f<=g;){k=d[h];p=c[g];if(!x(k,p))break;h--;g--;k.j(p,b)}for(;e<=h&&f<=g;)k=d[e++],p=c[f++],x(k,p)?k.j(p,b):G(this,p,k,b);if(e<=h){do F(this,d[e++],b);while(e<=h)}else if(f<=g){d=g+1;d=d<c.length?c[d].b:null;do C(this,c[f++],d,b);while(f<=g)}}else{var m=0;f=0;h=d.length-1;k=c.length-1;var e=d[m],g=c[f],l=d[h],q=c[k],v=!1,z,p=0;a:do{for(v=!0;e.l===g.l;){e.j(g,b);m++;f++;if(m>h||f>k)break a;e=d[m];g=c[f];v=!1}for(;l.l===q.l;){l.j(q,
b);h--;k--;if(m>h||f>k)break a;l=d[h];q=c[k];v=!1}for(;e.l===q.l;){e.j(q,b);e=k+1;e=e<c.length?c[e].b:null;H(this,q,e,b);m++;k--;if(m>h||f>k)break a;e=d[m];q=c[k];v=!1;continue a}for(;l.l===g.l;){l.j(g,b);H(this,g,e.b,b);h--;f++;if(m>h||f>k)break a;l=d[h];g=c[f];v=!1;continue a}}while(!v&&m<=h&&f<=k);if(m>h)for(e=k+1,e=e<c.length?c[e].b:null;f<=k;)C(this,c[f++],e,b);else if(f>k)for(;m<=h;)F(this,d[m++],b);else{v=h-m+1;e=k-f+1;g=Array(e);for(l=0;l<e;l++)g[l]=-1;var I=!1,J=0;if(16>=v*e)for(l=m;l<=h;l++){for(var A=
!0,q=d[l],m=f;m<=k;m++)if(z=c[m],q.l===z.l){g[m-f]=l;p>m?I=!0:p=m;q.j(z,b);A=!1;break}A&&(F(this,q,b),J++)}else{A=new Map;for(l=f;l<=k;l++)q=c[l],A.set(q.l,l);for(l=m;l<=h;l++)q=d[l],m=A.get(q.l),void 0!==m?(z=c[m],g[m-f]=l,p>m?I=!0:p=m,q.j(z,b)):(F(this,q,b),J++)}if(I){h=g.slice(0);d=[];d.push(0);k=0;for(p=g.length;k<p;k++)if(-1!==g[k])if(l=d[d.length-1],g[l]<g[k])h[k]=l,d.push(k);else{l=0;for(m=d.length-1;l<m;)q=(l+m)/2|0,g[d[q]]<g[k]?l=q+1:m=q;g[k]<g[d[l]]&&(0<l&&(h[k]=d[l-1]),d[l]=k)}l=d.length;
for(m=d[l-1];0<l--;)d[l]=m,m=h[m];m=d.length-1;for(l=e-1;0<=l;l--)-1===g[l]?(e=l+f,q=c[e],e+=1,e=e<c.length?c[e].b:null,C(this,q,e,b)):0>m||l!==d[m]?(e=l+f,q=c[e],e+=1,e=e<c.length?c[e].b:null,H(this,q,e,b)):m--}else if(v-J!==e)for(l=e-1;0<=l;l--)-1===g[l]&&(e=l+f,q=c[e],e+=1,e=e<c.length?c[e].b:null,C(this,q,e,b))}}else if(null!==c&&0<c.length)for(e=0;e<c.length;e++)C(this,c[e],null,b)}else 0!==(d&64)?c.value!==a.g&&(c.value=a.g):c.checked!==a.g&&(c.checked=a.g)}else this.i!==a.i&&(f=null===a.i?
"":a.i,0===(d&32768)?c.className=f:c.setAttribute("class",f)),c=a.h=this.h,c.setData(a.c),c.K(a.g),c.update()};n.H=function(){if(0===(this.a&4)){var a=this.g;if(null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)a[b].H()}else this.h.H()};n.F=function(){0!==(this.a&4)&&this.h.H()};n.detach=function(){if(0===(this.a&4)){var a=this.g;if(null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)a[b].detach()}else this.h.detach()};
n.G=function(){if(0!==(this.a&4))this.h.G();else if(null!==this.g){var a=this.g;if("string"!==typeof a)for(var b=0;b<a.length;b++)a[b].G()}};function C(a,b,c,d){0!==(a.a&32)&&null!==b.h.o.X?b.h.o.X(b.h,a,b,c,d):(b.create(d),a.b.insertBefore(b.b,c),b.F(),B(b,d))}function G(a,b,c,d){0!==(a.a&32)&&null!==b.h.o.replaceChild?b.h.o.replaceChild(b.h,a,b,c,d):(b.create(d),a.b.replaceChild(b.b,c.b),c.G(),b.F(),B(b,d))}
function H(a,b,c,d){0!==(a.a&32)&&null!==b.h.o.aa?b.h.o.aa(b.h,a,b,c,d):a.b.insertBefore(b.b,c)}function F(a,b,c){0!==(a.a&32)&&null!==b.h.o.removeChild?b.h.o.removeChild(b.h,a,b,c):(a.b.removeChild(b.b),b.G())}function aa(a){this.m=new MutationObserver(a);this.f=document.createTextNode("");this.m.observe(this.f,{characterData:!0})}function ba(a){var b=this.f="__kivi"+Math.random().toString();window.addEventListener("message",function(c){c.source===window&&c.data===b&&a()})}
function K(){this.a=0;this.v=[];this.focus=this.m=this.f=this.C=null}
new function(){var a=this;this.Z=function(){a.a|=1;for(a.f=Date.now();0<a.m.length;){var b=a.m;a.m=[];for(var c=0;c<b.length;c++)b[c]()}a.v++;a.a&=-4};this.Y=function(){a.a&=-5;a.a|=1;a.f=Date.now();var b=a.T;a.T=[];for(var c=0;c<b.length;c++)b[c]();a.v++;a.a&=-2};this.W=function(){var b=a.$,c,d;a.a&=-9;a.a|=1;a.f=Date.now();var f=a.U;a.U=a.C;a.C=f;for(d=0;d<b.length;d++)c=b[d],c.a|=8;do{for(;0!==(f.a&3);){if(0!==(f.a&1)){f.a&=-2;var g=f.v;for(d=0;d<g.length;d++){var e=g[d];if(null!==e)for(g[d]=null,
c=0;c<e.length;c++)e[c].update()}}if(0!==(f.a&2))for(f.a&=-3,c=f.C,d=0;d<c.length;d++)c[d]()}d=0;for(c=b.length;d<c;)g=b[d++],0===(g.a&16)?(g.a&=-33,d===c?b.pop():b[--d]=b.pop()):g.update();for(;0!==(f.a&4);)for(f.a&=-5,c=f.f,f.f=null,d=0;d<c.length;d++)c[d]()}while(0!==(f.a&3));for(;0!==(f.a&8);)for(f.a&=-9,c=f.m,d=0;d<c.length;d++)c[d]();null!==f.focus&&(f.focus.constructor===w?f.focus.b.focus():f.focus.focus(),f.focus=null);0<b.length&&0===(a.a&8)&&(a.a|=8,requestAnimationFrame(a.W));a.v++;a.a&=
-2};this.a=0;this.v=1;this.f=0;this.m=[];this.T=[];this.C=new K;this.U=new K;this.$=[];new aa(this.Z);new ba(this.Y)};function L(a,b){this.J=b}function M(a){this.w=524288;this.A=a;this.i=this.u=this.s=this.c=null}n=M.prototype;n.style=function(a){this.u=a;return this};n.className=function(a){this.i=a;return this};n.D=function(a){return new w(2|this.w,this,void 0===a?null:a)};
n.createElement=function(){var a,b,c,d;a=document.createElement(this.A);if(null!==this.c)for(c=Object.keys(this.c),b=0;b<c.length;b++)d=c[b],a[d]=this.c[d];if(null!==this.s)for(c=Object.keys(this.s),b=0;b<c.length;b++)d=c[b],t(a,d,this.s[d]);null!==this.u&&(a.style.cssText=this.u);null!==this.i&&(a.className=this.i);return a};n.update=function(a,b,c){null(a,b,c)};function N(){this.w=8;this.a=0;this.A="div";this.P=this.V=this.O=this.L=this.R=this.S=null}
function O(a){var b=new N;b.w|=a.w;b.a|=a.w;b.A=a;return b}n=N.prototype;n.setData=function(a){this.S=a;return this};n.K=function(a){this.R=a;return this};n.update=function(a){this.L=a;return this};n.F=function(a){this.O=a;return this};n.D=function(a){return new w(4,this,void 0===a?null:a)};function y(a,b){var c;0===(a.a&524288)?c=0===(a.a&32768)?document.createElement(a.A):document.createElementNS("http://www.w3.org/2000/svg",a.A):c=a.A.createElement();return new E(a.w,a,b,c)}
function E(a,b,c,d){this.a=a;this.o=b;this.depth=null===c?0:c.depth+1;this.children=this.data=null;this.element=d;this.v=this.m=this.f=null}n=E.prototype;n.setData=function(a){var b=this.o.S;null===b?this.data!==a&&(this.data=a,this.a|=8):b(this,a)};n.K=function(a){var b=this.o.R;null!==b&&b(this,a)};n.update=function(){10===(this.a&10)&&(this.o.L(this),this.a&=-9)};
n.j=function(a){null===this.f?(a.h=this,0!==(this.a&4)?(D(a,this.element,this),this.a&=-5):(a.b=this.element,B(a,this))):this.f.j(a,this);this.f=a};n.H=function(){this.F();null!==this.f&&0===(this.a&65536)&&this.f.H()};n.F=function(){this.a|=2;var a=this.o.O;null!==a&&a(this)};n.detach=function(){null!==this.f&&0===(this.a&65536)&&this.f.detach();P(this)};
function P(a){a.a&=-19;var b=a.m;if(null!==b)if(b.constructor===L)Q(b.J,b);else for(var c=0;c<b.length;c++){var d=b[c];Q(d.J,d)}a.m=null;b=a.v;if(null!==b)if(b.constructor===L)Q(b.J,b);else for(c=0;c<b.length;c++)d=b[c],Q(d.J,d);a.v=null;b=a.o.V;null!==b&&b(a)}n.G=function(){this.a|=1;null!==this.f&&0===(this.a&65536)&&this.f.G();P(this);null!==this.o.P&&this.o.P(this)};function Q(a,b){var c=a.m;c.constructor===L||1===c.length?a.m=null:c[c.indexOf(b)]=c.pop()}
function ca(a){var b=document.getElementById("app"),c=y(R,null);b.appendChild(c.element);c.F();c.setData(a);c.update();return c}function S(a,b){this.M=a;this.ba=b}var da=new S(0,"");function T(a){ea++;this.name=a;this.N=null;this.update()}T.prototype.update=function(){for(var a=[],b=Math.floor(10*Math.random()+1),c=0;c<b;c++)a.push(new S(15*Math.random(),.1>Math.random()?"vacuum":.2>Math.random()?"<IDLE> in transaction":"SELECT blah FROM something"));this.N=a};
function fa(a){a=a.N.slice();a.sort(function(a,c){return a.M-c.M});for(a=a.slice(0,5);5>a.length;)a.push(da);return a}var ea=0;function U(a){this.I=[];for(var b=0;b<a;b++)this.I.push(new T("cluster"+b)),this.I.push(new T("cluster"+b+"slave"))}U.prototype.update=function(){for(var a=this.I,b=0;b<a.length;b++)a[b]=new T(a[b].name)};function ga(a){var b=V;a=a.I;for(var c=0;c<a.length;c++)Math.random()<b&&(a[c]=new T(a[c].name))}
var W=(new M("div")).className("popover left"),ha=(new M("div")).className("popover-content"),ia=(new M("div")).className("arrow"),ja=O(W).update(function(a){a.j((new w(8|W.w,W,null)).children([ha.D().children(a.data),ia.D()]))});function ka(a){if(!a)return"";if(60<a){var b=(a%60).toFixed(2).split(".");return Math.floor(a/60)+":"+b[0]+"."+b[1]}return a.toFixed(2)}var la=(new M("td")).className("dbname"),ma=(new M("td")).className("query-count"),X=new N;X.A="tr";
var na=X.update(function(a){for(var b=a.data,c=fa(b),d=b.N.length,b=[la.D().children(b.name),ma.D().children([(new w(2,"span",null)).className(20<=d?"label label-important":10<=d?"label label-warning":"label label-success").children(""+d)])],d=0;5>d;d++){var f=c[d],g=f.M;b.push((new w(2,"td",null)).className(10<=g?"Query elapsed warn_long":1<=g?"Query elapsed warn":"Query elapsed short").children([new w(1,null,ka(g)),ja.D(f.ba)]))}a.j((new w(8,null,null)).children(b))}),Y=(new M("table")).className("table table-striped latest-data"),
R=O(Y).update(function(a){for(var b=a.data.I,c=Array(b.length),d=0;d<b.length;d++)c[d]=na.D(b[d]);a.j((new w(8|Y.w,Y,null)).children([(new w(2,"tbody",null)).children(c)]))}),oa={};
function pa(a){this.name=a;this.B=[];this.element=document.createElement("div");this.element.style.cssText="padding: 2px; background-color: #020";this.v=document.createElement("div");this.v.style.cssText="text-align: center; font-size: 12px; color: #0f0";this.v.textContent=this.name;this.C=document.createElement("div");this.C.style.cssText="font-size: 12px; color: #0f0";this.f=document.createElement("canvas");this.f.style.cssText="display: block; padding: 0; margin: 0";this.f.width=200;this.f.height=
Z;this.element.appendChild(this.v);this.element.appendChild(this.C);this.element.appendChild(this.f);this.m=this.f.getContext("2d")}
pa.prototype.update=function(){var a=Math.min.apply(Math,this.B),b=Math.max.apply(Math,this.B),c=Z/b;this.C.innerHTML="<div>min: "+a.toFixed(3)+"ms</div><div>max: "+b.toFixed(3)+"ms</div><div>now: "+this.B[this.B.length-1].toFixed(3)+"ms</div>";this.m.fillStyle="#010";this.m.fillRect(0,0,200,Z);this.m.fillStyle="#0f0";for(a=0;a<this.B.length;a++)this.m.fillRect(a,Z,1,-(this.B[a]*c))};var Z=100;
function qa(){var a=document.getElementById("perf"),b=new pa("update");oa.update=b;a.appendChild(b.element)}function ra(a){var b=oa.update,c=window.performance.now();a();b.B.push(window.performance.now()-c);200<b.B.length&&b.B.shift();b.update()}var V=.5;
document.addEventListener("DOMContentLoaded",function(){function a(){ga(b);ra(function(){R.L(g)});setTimeout(a,0)}qa();var b=new U(50),c=document.createElement("div");c.style.display="flex";var d=document.createElement("input");d.type="range";d.style.marginBottom="10px";d.style.marginTop="5px";var f=document.createElement("label");f.textContent="mutations : "+(100*V).toFixed(0)+"%";d.addEventListener("change",function(a){V=Number.parseFloat(a.target.value)/100;f.textContent="mutations : "+(100*V).toFixed(0)+
"%"});c.appendChild(f);c.appendChild(d);document.body.insertBefore(c,document.body.firstChild);var g=ca(b);setTimeout(a,0)});}).call();
