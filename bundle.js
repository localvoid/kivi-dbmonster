(function(){'use strict';function m(a){return"m"===a[2]?"http://www.w3.org/XML/1998/namespace":"http://www.w3.org/1999/xlink"}function p(a,b,c){"$"!==b[0]?a.setAttribute(b,c):a.setAttributeNS(m(b),b.substring(1),c)}function q(a,b){"$"!==b[0]?a.removeAttribute(b):a.removeAttributeNS(m(b),b.substring(1))}function r(a,b,c){this.flags=a;this.tag=b;this._key=null;this._props=c;this.cref=this.ref=this._children=this._className=this._style=this._attrs=null}r.prototype.key=function(a){this._key=a;return this};
r.prototype.props=function(a){this._props=a;return this};r.prototype.dynamicShapeProps=function(a){this.flags|=256;this._props=a;return this};r.prototype.attrs=function(a){this._attrs=a;return this};r.prototype.dynamicShapeAttrs=function(a){this.flags|=128;this._attrs=a;return this};r.prototype.style=function(a){this._style=a;return this};r.prototype.className=function(a){this._className=a;return this};r.prototype.children=function(a){this._children=a;return this};
r.prototype.trackByKeyChildren=function(a){this.flags|=16;this._children=a;return this};r.prototype.value=function(a){this.flags|=512;this._children=a;return this};r.prototype.checked=function(a){this.flags|=1024;this._children=a;return this};r.prototype.keepAlive=function(){this.flags|=2048;return this};r.prototype.managedContainer=function(a){this.flags|=32;this.cref=a;return this};r.prototype.disableChildrenShapeError=function(){return this};r.prototype.disableFreeze=function(){return this};
r.prototype._canSync=function(a){return this.flags===a.flags&&this.tag===a.tag&&this._key===a._key};r.prototype.create=function(a){var b=this.flags;this.flags&=-65;0!==(b&1)?this.ref=document.createTextNode(this._props):0!==(b&2)?this.ref=0===(b&524288)?0===(b&32768)?document.createElement(this.tag):document.createElementNS("http://www.w3.org/2000/svg",this.tag):this.tag.createElement():(a=this.tag.createComponent(a),this.ref=a.element,this.cref=a)};
r.prototype.createCommentPlaceholder=function(){this.flags|=64;this.ref=document.createComment("")};
r.prototype.render=function(a){var b,c,d,e,f=this.flags,g;if(0!==(f&10)){g=this.ref;if(0===(f&1048576)){var h=this._props;if(null!==h)for(e=Object.keys(h),b=0,c=e.length;b<c;b++)d=e[b],g[d]=h[d];if(null!==this._attrs)for(e=Object.keys(this._attrs),b=0,c=e.length;b<c;b++)d=e[b],p(g,d,this._attrs[d]);null!==this._style&&(0===(f&32768)?g.style.cssText=this._style:g.setAttribute("style",this._style));null!==this._className&&(0===(f&32768)?g.className=this._className:g.setAttribute("class",this._className))}else 0===
(f&8)?this.tag.update(g,void 0,this._props):a.descriptor._tag.update(g,void 0,this._props);f=this._children;if(null!==f)if(0===(this.flags&1536))if("string"===typeof f)g.textContent=f;else for(b=0,c=f.length;b<c;b++)this._insertChild(f[b],null,a);else 0!==(this.flags&512)?this.ref.value=this._children:this.ref.checked=this._children}else 0!==(f&4)&&(a=this.cref,g=this.ref,null!==this._className&&(0===(f&32768)?g.className=this._className:g.setAttribute("class",this._className)),a.setData(this._props),
a.setChildren(this._children),a.update());this._freeze()};r.prototype.mount=function(a,b){var c=this.flags,d=this._children;this.ref=a;if(0!==(c&4))d=this.cref=this.tag._mountComponent(b,a),d.setData(this._props),d.setChildren(this._children),d.update();else if(null!==d&&"string"!==typeof d&&0<d.length){for(var e=a.firstChild,f;8===e.nodeType;)f=e,e=e.nextSibling,a.removeChild(f);for(c=0;c<d.length;c++)for(d[c].mount(e,b),e=e.nextSibling;8===e.nodeType;)f=e,e=e.nextSibling,a.removeChild(f)}this._freeze()};
r.prototype.sync=function(a,b){var c=this.ref,d=this.flags,e;a.ref=c;if(0!==(d&1))this._props!==a._props&&(this.ref.nodeValue=a._props);else if(0!==(d&10)){if(0===(d&1048576)){if(this._props!==a._props)if(0===(this.flags&256)){e=this._props;var f=a._props,g=Object.keys(e),h,k;for(k=0;k<g.length;k++){h=g[k];var l=f[h];e[h]!==l&&(c[h]=l)}}else if(e=this._props,f=a._props,null!==e)if(null===f)for(h=Object.keys(e),g=0;g<h.length;g++)c[h[g]]=void 0;else{h=Object.keys(e);for(g=0;g<h.length;g++)k=h[g],f.hasOwnProperty(k)?
(l=f[k],e[k]!==l&&(c[k]=l)):c[k]=void 0;h=Object.keys(f);for(g=0;g<h.length;g++)k=h[g],e.hasOwnProperty(k)||(c[k]=f[k])}else if(null!==f)for(h=Object.keys(f),g=0;g<h.length;g++)k=h[g],c[k]=f[k];if(this._attrs!==a._attrs)if(0===(this.flags&128))for(e=this._attrs,f=a._attrs,g=Object.keys(e),k=0;k<g.length;k++)h=g[k],l=f[h],e[h]!==l&&p(c,h,l);else if(e=this._attrs,f=a._attrs,null!==e)if(null===f)for(h=Object.keys(e),g=0;g<h.length;g++)q(c,h[g]);else{h=Object.keys(e);for(g=0;g<h.length;g++)k=h[g],f.hasOwnProperty(k)?
(l=f[k],e[k]!==l&&p(c,k,l)):q(c,k);h=Object.keys(f);for(g=0;g<h.length;g++)k=h[g],e.hasOwnProperty(k)||p(c,k,f[k])}else if(null!==f)for(h=Object.keys(f),g=0;g<h.length;g++)k=h[g],p(c,k,f[k]);this._style!==a._style&&(e=null===a._style?"":a._style,0===(d&32768)?c.style.cssText=e:c.setAttribute("style",e));this._className!==a._className&&(e=null===a._className?"":a._className,0===(d&32768)?c.className=e:c.setAttribute("class",e))}else this._props!==a._props&&(0===(d&8)?this.tag.update(c,this._props,
a._props):b.descriptor._tag.update(c,this._props,a._props));0===(this.flags&1536)?this._children!==a._children&&this.syncChildren(this._children,a._children,b):0!==(d&512)?c.value!==a._children&&(c.value=a._children):c.checked!==a._children&&(c.checked=a._children)}else this._className!==a._className&&(e=null===a._className?"":a._className,0===(d&32768)?c.className=e:c.setAttribute("class",e)),c=a.cref=this.cref,c.setData(a._props),c.setChildren(a._children),c.update();a._freeze()};
r.prototype.attach=function(){if(0===(this.flags&4)){var a=this._children;if(null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)a[b].attach()}else this.cref.attach()};r.prototype.attached=function(){0!==(this.flags&4)&&this.cref.attach()};r.prototype.detach=function(){if(0===(this.flags&4)){var a=this._children;if(null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)a[b].detach()}else this.cref.detach()};
r.prototype.dispose=function(){if(0!==(this.flags&4))this.cref.dispose();else if(null!==this._children){var a=this._children;if("string"!==typeof a)for(var b=0;b<a.length;b++)a[b].dispose()}};
r.prototype.syncChildren=function(a,b,c){var d,e,f=0,g=!1;if("string"===typeof a)if(null===b)this.ref.removeChild(this.ref.firstChild);else if("string"===typeof b)(a=this.ref.firstChild)?a.nodeValue=b:this.ref.textContent=b;else for(this.ref.removeChild(this.ref.firstChild);f<b.length;)this._insertChild(b[f++],null,c);else if("string"===typeof b){if(null!==a)for(;f<a.length;)this._removeChild(a[f++],c);this.ref.textContent=b}else if(null!==a&&0!==a.length)if(null===b||0===b.length)for(;f<a.length;)this._removeChild(a[f++],
c);else if(1===a.length&&1===b.length)d=a[0],e=b[0],d._canSync(e)?d.sync(e,c):this._replaceChild(e,d,c);else if(1===a.length){d=a[0];if(0===(this.flags&16))for(;f<b.length;){e=b[f++];if(d._canSync(e)){d.sync(e,c);g=!0;break}this._insertChild(e,d.ref,c)}else for(;f<b.length;){e=b[f++];if(d._key===e._key){d.sync(e,c);g=!0;break}this._insertChild(e,d.ref,c)}if(g)for(;f<b.length;)this._insertChild(b[f++],null,c);else this._removeChild(d,c)}else if(1===b.length){e=b[0];if(0===(this.flags&16))for(;f<a.length;){d=
a[f++];if(d._canSync(e)){d.sync(e,c);g=!0;break}this._removeChild(d,c)}else for(;f<a.length;){d=a[f++];if(d._key===e._key){d.sync(e,c);g=!0;break}this._removeChild(d,c)}if(g)for(;f<a.length;)this._removeChild(a[f++],c);else this._insertChild(e,null,c)}else 0===(this.flags&16)?this._syncChildren(a,b,c):this._syncChildrenTrackingByKeys(a,b,c);else if(null!==b&&0<b.length)for(f=0;f<b.length;f++)this._insertChild(b[f],null,c)};
r.prototype._syncChildren=function(a,b,c){for(var d=0,e=0,f=a.length-1,g=b.length-1,h,k;d<=f&&e<=g;){h=a[d];k=b[e];if(!h._canSync(k))break;d++;e++;h.sync(k,c)}for(;d<=f&&e<=g;){h=a[f];k=b[g];if(!h._canSync(k))break;f--;g--;h.sync(k,c)}for(;d<=f&&e<=g;)h=a[d++],k=b[e++],h._canSync(k)?h.sync(k,c):this._replaceChild(k,h,c);if(d<=f){do this._removeChild(a[d++],c);while(d<=f)}else if(e<=g){a=g+1;a=a<b.length?b[a].ref:null;do this._insertChild(b[e++],a,c);while(e<=g)}};
r.prototype._syncChildrenTrackingByKeys=function(a,b,c){var d=0,e=0,f=a.length-1,g=b.length-1,h=a[d],k=b[e],l=a[f],n=b[g],u=!1,C,A=0;a:do{for(u=!0;h._key===k._key;){h.sync(k,c);d++;e++;if(d>f||e>g)break a;h=a[d];k=b[e];u=!1}for(;l._key===n._key;){l.sync(n,c);f--;g--;if(d>f||e>g)break a;l=a[f];n=b[g];u=!1}for(;h._key===n._key;){h.sync(n,c);h=g+1;h=h<b.length?b[h].ref:null;this._moveChild(n,h,c);d++;g--;if(d>f||e>g)break a;h=a[d];n=b[g];u=!1;continue a}for(;l._key===k._key;){l.sync(k,c);this._moveChild(k,
h.ref,c);f--;e++;if(d>f||e>g)break a;l=a[f];k=b[e];u=!1;continue a}}while(!u&&d<=f&&e<=g);if(d>f)for(h=g+1,h=h<b.length?b[h].ref:null;e<=g;)this._insertChild(b[e++],h,c);else if(e>g)for(;d<=f;)this._removeChild(a[d++],c);else{u=f-d+1;h=g-e+1;k=Array(h);for(l=0;l<h;l++)k[l]=-1;var G=!1,H=0;if(16>=u*h)for(l=d;l<=f;l++){for(var D=!0,n=a[l],d=e;d<=g;d++)if(C=b[d],n._key===C._key){k[d-e]=l;A>d?G=!0:A=d;n.sync(C,c);D=!1;break}D&&(this._removeChild(n,c),H++)}else{D=new Map;for(l=e;l<=g;l++)n=b[l],D.set(n._key,
l);for(l=d;l<=f;l++)n=a[l],d=D.get(n._key),void 0!==d?(C=b[d],k[d-e]=l,A>d?G=!0:A=d,n.sync(C,c)):(this._removeChild(n,c),H++)}if(G){f=k.slice(0);a=[];a.push(0);g=0;for(A=k.length;g<A;g++)if(-1!==k[g])if(l=a[a.length-1],k[l]<k[g])f[g]=l,a.push(g);else{l=0;for(d=a.length-1;l<d;)n=(l+d)/2|0,k[a[n]]<k[g]?l=n+1:d=n;k[g]<k[a[l]]&&(0<l&&(f[g]=a[l-1]),a[l]=g)}l=a.length;for(d=a[l-1];0<l--;)a[l]=d,d=f[d];d=a.length-1;for(l=h-1;0<=l;l--)-1===k[l]?(h=l+e,n=b[h],h+=1,h=h<b.length?b[h].ref:null,this._insertChild(n,
h,c)):0>d||l!==a[d]?(h=l+e,n=b[h],h+=1,h=h<b.length?b[h].ref:null,this._moveChild(n,h,c)):d--}else if(u-H!==h)for(l=h-1;0<=l;l--)-1===k[l]&&(h=l+e,n=b[h],h+=1,h=h<b.length?b[h].ref:null,this._insertChild(n,h,c))}};r.prototype._insertChild=function(a,b,c){0!==(this.flags&32)&&null!==a.cref.descriptor._insertChild?a.cref.descriptor._insertChild(a.cref,this,a,b,c):null===a.ref?(a.create(c),this.ref.insertBefore(a.ref,b),a.attached(),a.render(c)):(this.ref.insertBefore(a.ref,b),a.attach())};
r.prototype._replaceChild=function(a,b,c){0!==(this.flags&32)&&null!==a.cref.descriptor._replaceChild?a.cref.descriptor._replaceChild(a.cref,this,a,b,c):(null===a.ref?(a.create(c),this.ref.replaceChild(a.ref,b.ref),a.attached(),a.render(c)):(this.ref.replaceChild(a.ref,b.ref),a.attach()),0===(b.flags&2048)?b.dispose():b.detach())};
r.prototype._moveChild=function(a,b,c){0!==(this.flags&32)&&null!==a.cref.descriptor._moveChild?a.cref.descriptor._moveChild(a.cref,this,a,b,c):this.ref.insertBefore(a.ref,b)};r.prototype._removeChild=function(a,b){0!==(this.flags&32)&&null!==a.cref.descriptor._removeChild?a.cref.descriptor._removeChild(a.cref,this,a,b):(this.ref.removeChild(a.ref),0===(a.flags&2048)?a.dispose():a.detach())};r.prototype._freeze=function(){};
function t(a){this._observer=new MutationObserver(a);this._node=document.createTextNode("");this._toggle=48;this._observer.observe(this._node,{characterData:!0})}t.prototype.requestNextTick=function(){this._toggle^=1;this._node.data=String.fromCharCode(this._toggle)};function v(a){var b=this._message="__kivi"+Math.random().toString();window.addEventListener("message",function(c){c.source===window&&c.data===b&&a()})}v.prototype.requestNextTick=function(){window.postMessage(this._message,"*")};
function w(){this.flags=0;this.componentTasks=[];this.focus=this.afterTasks=this.readTasks=this.writeTasks=null}w.prototype.updateComponent=function(a){var b=a.depth;for(this.flags|=1;b>=this.componentTasks.length;)this.componentTasks.push(null);var c=this.componentTasks[b];null===c&&(c=this.componentTasks[b]=[]);c.push(a)};w.prototype.write=function(a){this.flags|=2;null===this.writeTasks&&(this.writeTasks=[]);this.writeTasks.push(a)};
w.prototype.read=function(a){this.flags|=4;null===this.readTasks&&(this.readTasks=[]);this.readTasks.push(a)};w.prototype.after=function(a){this.flags|=8;null===this.afterTasks&&(this.afterTasks=[]);this.afterTasks.push(a)};w.prototype.setFocus=function(a){this.focus=a};
function x(){var a=this;this._handleMicrotaskScheduler=function(){a.flags|=1;for(a.time=Date.now();0<a._microtasks.length;){var b=a._microtasks;a._microtasks=[];for(var c=0;c<b.length;c++)b[c]()}a.clock++;a.flags&=-4};this._handleMacrotaskScheduler=function(){a.flags&=-5;a.flags|=1;a.time=Date.now();var b=a._macrotasks;a._macrotasks=[];for(var c=0;c<b.length;c++)b[c]();a.clock++;a.flags&=-2};this._handleAnimationFrame=function(){var b=a._updateComponents,c,d;a.flags&=-9;a.flags|=1;a.time=Date.now();
var e=a._nextFrame;a._nextFrame=a._currentFrame;a._currentFrame=e;for(d=0;d<b.length;d++)b[d].markDirty();do{for(;0!==(e.flags&3);){if(0!==(e.flags&1)){e.flags&=-2;var f=e.componentTasks;for(d=0;d<f.length;d++){var g=f[d];if(null!==g)for(f[d]=null,c=0;c<g.length;c++)g[c].update()}}if(0!==(e.flags&2))for(e.flags&=-3,c=e.writeTasks,d=0;d<c.length;d++)c[d]()}d=0;for(c=b.length;d<c;)f=b[d++],0===(f.flags&16)?(f.flags&=-33,d===c?b.pop():b[--d]=b.pop()):f.update();for(;0!==(e.flags&4);)for(e.flags&=-5,
c=e.readTasks,e.readTasks=null,d=0;d<c.length;d++)c[d]()}while(0!==(e.flags&3));for(;0!==(e.flags&8);)for(e.flags&=-9,c=e.afterTasks,d=0;d<c.length;d++)c[d]();null!==e.focus&&(e.focus.constructor===r?e.focus.ref.focus():e.focus.focus(),e.focus=null);0<b.length&&a.requestAnimationFrame();a.clock++;a.flags&=-2};this.flags=0;this.clock=1;this.time=0;this._microtasks=[];this._macrotasks=[];this._currentFrame=new w;this._nextFrame=new w;this._updateComponents=[];this._microtaskScheduler=new t(this._handleMicrotaskScheduler);
this._macrotaskScheduler=new v(this._handleMacrotaskScheduler)}x.prototype.requestAnimationFrame=function(){0===(this.flags&8)&&(this.flags|=8,requestAnimationFrame(this._handleAnimationFrame))};x.prototype.currentFrame=function(){return this._currentFrame};x.prototype.nextFrame=function(){this.requestAnimationFrame();return this._nextFrame};x.prototype.startUpdateComponentEachFrame=function(a){this.requestAnimationFrame();this._updateComponents.push(a)};
x.prototype.scheduleMicrotask=function(a){0===(this.flags&2)&&(this.flags|=2,this._microtaskScheduler.requestNextTick());this._microtasks.push(a)};x.prototype.scheduleMacrotask=function(a){0===(this.flags&4)&&(this.flags|=4,this._macrotaskScheduler.requestNextTick());this._macrotasks.push(a)};x.prototype.start=function(a){this.flags|=1;this.time=Date.now();a();this.clock++;this.flags&=-2};var y=new x;function z(a,b,c,d){this._flags=a;this.invalidator=b;this._component=c;this._callback=d}
z.prototype.cancel=function(){0===(this._flags&2)?(this.invalidator.removeSubscription(this),0!==(this._flags&1)&&this._component.removeSubscription(this)):(this.invalidator.removeTransientSubscription(this),0!==(this._flags&1)&&this._component.removeTransientSubscription(this))};z.prototype.invalidate=function(){0!==(this._flags&1)?this._component.invalidate():this._callback()};
function B(a){this.markFlags=524288;this._flags=0;this._tag=a;this._ref=this._updateHandler=this._className=this._style=this._attrs=this._props=null}B.prototype.svg=function(){this.markFlags|=32768;this._flags|=32768;return this};B.prototype.props=function(a){this._props=a;return this};B.prototype.attrs=function(a){this._attrs=a;return this};B.prototype.style=function(a){this._style=a;return this};B.prototype.className=function(a){this._className=a;return this};
B.prototype.enableCloning=function(){this._flags|=1;return this};B.prototype.updateHandler=function(a){this.markFlags|=1048576;this._updateHandler=a;return this};B.prototype.createVNode=function(a){return new r(2|this.markFlags,this,void 0===a?null:a)};B.prototype.createVRoot=function(a){return new r(8|this.markFlags,this,void 0===a?null:a)};
B.prototype.createElement=function(){var a,b,c,d;if(null===this._ref){a=0===(this._flags&32768)?document.createElement(this._tag):document.createElementNS("http://www.w3.org/2000/svg",this._tag);if(null!==this._props)for(c=Object.keys(this._props),b=0;b<c.length;b++)d=c[b],a[d]=this._props[d];if(null!==this._attrs)for(c=Object.keys(this._attrs),b=0;b<c.length;b++)d=c[b],p(a,d,this._attrs[d]);null!==this._style&&(a.style.cssText=this._style);null!==this._className&&(a.className=this._className);return 0!==
(this._flags&1)?(this._ref=a,this._ref.cloneNode(!1)):a}return this._ref.cloneNode(!1)};B.prototype.update=function(a,b,c){this._updateHandler(a,b,c)};function E(){this.markFlags=8;this.flags=0;this._tag="div";this._disposed=this._detached=this._attached=this._invalidated=this._update=this._init=this._setChildren=this._setData=null}E.prototype.rootTag=function(a){this._tag=a;return this};E.prototype.svg=function(){this.markFlags|=32768;this.flags|=32768;return this};
E.prototype.rootVModel=function(a){this.markFlags|=a.markFlags;this.flags|=a.markFlags;this._tag=a;return this};E.prototype.canvas=function(){this.markFlags|=65536;this.flags|=65536;this._tag="canvas";return this};E.prototype.setData=function(a){this._setData=a;return this};E.prototype.setChildren=function(a){this._setChildren=a;return this};E.prototype.init=function(a){this._init=a;return this};E.prototype.update=function(a){this._update=a;return this};
E.prototype.invalidated=function(a){this._invalidated=a;return this};E.prototype.attached=function(a){this._attached=a;return this};E.prototype.detached=function(a){this._detached=a;return this};E.prototype.disposed=function(a){this._disposed=a;return this};E.prototype.enableRecycling=function(){return this};E.prototype.createVNode=function(a){return new r(4,this,void 0===a?null:a)};
E.prototype.createComponent=function(a){var b;b=0===(this.flags&524288)?0===(this.flags&32768)?document.createElement(this._tag):document.createElementNS("http://www.w3.org/2000/svg",this._tag):this._tag.createElement();a=new F(this.markFlags,this,a,b);null!==this._init&&this._init(a);return a};E.prototype._mountComponent=function(a,b){var c=new F(this.markFlags|4,this,a,b);null!==this._init&&this._init(c);c.attached();return c};
function F(a,b,c,d){this.flags=a;this.mtime=0;this.descriptor=b;this.parent=c;this.depth=null===c?0:c.depth+1;this.children=this.data=this.state=null;this.element=d;this.root=0===(a&65536)?null:d.getContext("2d");this._transientSubscriptions=this._subscriptions=null}F.prototype.markDirty=function(){this.flags|=8};F.prototype.setParent=function(a){this.parent=a;this.depth=null===a?0:a.depth+1};
F.prototype.setData=function(a){var b=this.descriptor._setData;null===b?this.data!==a&&(this.data=a,this.flags|=8):b(this,a)};F.prototype.get2DContext=function(){return this.root};F.prototype.setChildren=function(a){var b=this.descriptor._setChildren;null!==b&&b(this,a)};F.prototype.update=function(){10===(this.flags&10)&&(this.descriptor._update(this),this.mtime=y.clock,this.flags&=-9)};
F.prototype.sync=function(a){null===this.root?(a.cref=this,0!==(this.flags&4)?(a.mount(this.element,this),this.flags&=-5):(a.ref=this.element,a.render(this))):this.root.sync(a,this);this.root=a};F.prototype.invalidate=function(){0===(this.flags&9)&&(this.flags|=8,this.cancelTransientSubscriptions(),y.nextFrame().updateComponent(this))};F.prototype.startUpdateEachFrame=function(){this.flags|=16;0===(this.flags&32)&&(this.flags|=32,y.startUpdateComponentEachFrame(this))};
F.prototype.stopUpdateEachFrame=function(){this.flags&=-17};F.prototype.attach=function(){this.attached();null!==this.root&&0===(this.flags&65536)&&this.root.attach()};F.prototype.attached=function(){this.flags|=2;var a=this.descriptor._attached;null!==a&&a(this)};F.prototype.detach=function(){null!==this.root&&0===(this.flags&65536)&&this.root.detach();this.detached()};
F.prototype.detached=function(){this.flags&=-19;this.cancelSubscriptions();this.cancelTransientSubscriptions();var a=this.descriptor._detached;null!==a&&a(this)};F.prototype.dispose=function(){this.flags|=1;null!==this.root&&0===(this.flags&65536)&&this.root.dispose();0!==(this.flags&2)&&this.detached();null!==this.descriptor._disposed&&this.descriptor._disposed(this)};
F.prototype.subscribe=function(a){a=a.subscribeComponent(this);var b=this._subscriptions;null===b?this._subscriptions=a:b.constructor===z?this._subscriptions=[this._subscriptions,a]:b.push(a)};F.prototype.transientSubscribe=function(a){a=a.transientSubscribeComponent(this);var b=this._transientSubscriptions;null===b?this._transientSubscriptions=a:b.constructor===z?this._transientSubscriptions=[this._transientSubscriptions,a]:b.push(a)};
F.prototype.removeSubscription=function(a){var b=this._subscriptions;b.constructor===z||1===b.length?this._subscriptions=null:(a=b.indexOf(a),b[a]=b.pop())};F.prototype.removeTransientSubscription=function(a){var b=this._transientSubscriptions;b.constructor===z||1===b.length?this._transientSubscriptions=null:(a=b.indexOf(a),b[a]=b.pop())};
F.prototype.cancelSubscriptions=function(){var a=this._subscriptions;if(null!==a)if(a.constructor===z)a.invalidator.removeSubscription(a);else for(var b=0;b<a.length;b++){var c=a[b];c.invalidator.removeSubscription(c)}this._subscriptions=null};
F.prototype.cancelTransientSubscriptions=function(){var a=this._transientSubscriptions;if(null!==a)if(a.constructor===z)a.invalidator.removeSubscription(a);else for(var b=0;b<a.length;b++){var c=a[b];c.invalidator.removeSubscription(c)}this._transientSubscriptions=null};function I(a,b,c){a=a.createComponent(null);c.appendChild(a.element);a.attached();a.setData(b);a.update();return a}function J(a,b){this.elapsed=a;this.query=b}
J.rand=function(){return new J(15*Math.random(),.1>Math.random()?"vacuum":.2>Math.random()?"<IDLE> in transaction":"SELECT blah FROM something")};var K=new J(0,"");function L(a){this.id=L._nextId++;this.name=a;this.queries=null;this.update()}L.prototype.update=function(){for(var a=[],b=Math.floor(10*Math.random()+1),c=0;c<b;c++)a.push(J.rand());this.queries=a};
L.prototype.getTopFiveQueries=function(){var a=this.queries.slice();a.sort(function(a,c){return a.elapsed-c.elapsed});for(a=a.slice(0,5);5>a.length;)a.push(K);return a};L._nextId=0;function M(a){this.dbs=[];for(var b=0;b<a;b++)this.dbs.push(new L("cluster"+b)),this.dbs.push(new L("cluster"+b+"slave"))}M.prototype.update=function(){for(var a=this.dbs,b=0;b<a.length;b++)a[b]=new L(a[b].name)};M.prototype.randomUpdate=function(a){for(var b=this.dbs,c=0;c<b.length;c++)Math.random()<a&&(b[c]=new L(b[c].name))};
var N=(new B("div")).className("popover left"),O=(new B("div")).className("popover-content"),aa=(new B("div")).className("arrow"),ba=(new E).rootVModel(N).update(function(a){a.sync(N.createVRoot().children([O.createVNode().children(a.data),aa.createVNode()]))});function ca(a){if(!a)return"";if(60<a){var b=Math.floor(a/60);a=(a%60).toFixed(2).split(".");return b+":"+a[0]+"."+a[1]}return a.toFixed(2)}
var da=(new B("td")).className("dbname"),ea=(new B("td")).className("query-count"),fa=(new E).rootTag("tr").update(function(a){var b=a.data,c=b.getTopFiveQueries(),d=b.queries.length,e=Array(7);e[0]=da.createVNode().children(b.name);e[1]=ea.createVNode().children([(new r(2,"span",null)).className(20<=d?"label label-important":10<=d?"label label-warning":"label label-success").children(""+d)]);for(b=0;5>b;b++){var d=c[b],f=d.elapsed;e[b+2]=(new r(2,"td",null)).className(10<=f?"Query elapsed warn_long":
1<=f?"Query elapsed warn":"Query elapsed short").children([new r(1,null,ca(f)),ba.createVNode(d.query)])}a.sync((new r(8,null,null)).children(e))}),P=(new B("table")).className("table table-striped latest-data"),Q=(new E).rootVModel(P).update(function(a){for(var b=a.data.dbs,c=Array(b.length),d=0;d<b.length;d++)c[d]=fa.createVNode(b[d]);a.sync(P.createVRoot().children([(new r(2,"tbody",null)).children(c)]))}),R={},S=null,T=[],U=-1;
function ga(){U=-1;var a=T;T=[];for(var b=0;b<a.length;b++)a[b]()}
function V(a,b,c){var d=this;this.update=function(){var a=Math.min.apply(Math,d.samples),b=Math.max.apply(Math,d.samples),c=d.samples[d.samples.length-1],h=d.samples.reduce(function(a,b){return a+b},0)/d.samples.length,k=V.HEIGHT/b;d.text.innerHTML="<div>min: &nbsp;"+a.toFixed(3)+d.unitName+"</div>"+("<div>max: &nbsp;"+b.toFixed(3)+d.unitName+"</div>")+("<div>mean: "+h.toFixed(3)+d.unitName+"</div>")+("<div>now: &nbsp;"+c.toFixed(3)+d.unitName+"</div>");if(d.showGraph)for(d.ctx.fillStyle="#010",d.ctx.fillRect(0,
0,V.WIDTH,V.HEIGHT),d.ctx.fillStyle="#0f0",a=0;a<d.samples.length;a++)d.ctx.fillRect(a,V.HEIGHT,1,-(d.samples[a]*k))};this.name=a;this.unitName=b;this.showGraph=c;this.samples=[];this.element=document.createElement("div");this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0";this.label=document.createElement("div");this.label.style.cssText="text-align: center";this.label.textContent=this.name;this.text=document.createElement("div");this.element.appendChild(this.label);
this.element.appendChild(this.text);c?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=V.WIDTH,this.canvas.height=V.HEIGHT,this.ctx=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):this.ctx=this.canvas=null}V.prototype.invalidate=function(){T.push(this.update);-1===U&&requestAnimationFrame(ga)};V.prototype.addSample=function(a){200===this.samples.length&&this.samples.shift();this.samples.push(a);this.invalidate()};
V.HEIGHT=100;V.WIDTH=200;function W(){S||(S=document.createElement("div"),S.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(S))}function ha(){function a(d){var e=1/((d-(0===c?d:c))/1E3);Infinity!==e&&b.addSample(e);c=d;requestAnimationFrame(a)}W();var b=new V("FPS","fps",!1);S.appendChild(b.element);var c=0;requestAnimationFrame(a)}function X(a,b){W();var c=new V(a,b,!0);R[a]=c;S.appendChild(c.element)}
function Y(a,b){var c=R[a],d=performance.now();b();c.addSample(performance.now()-d)}var Z=.5;
document.addEventListener("DOMContentLoaded",function(){function a(){Y("data update",function(){b.randomUpdate(Z)});Y("view update",function(){Q._update(f)});requestAnimationFrame(a)}ha();X("data update","ms");X("view update","ms");var b=new M(50),c=document.createElement("div");c.style.display="flex";var d=document.createElement("input");d.type="range";d.style.marginBottom="10px";d.style.marginTop="5px";var e=document.createElement("label");e.textContent="mutations : "+(100*Z).toFixed(0)+"%";d.addEventListener("change",
function(a){Z=Number.parseFloat(a.target.value)/100;e.textContent="mutations : "+(100*Z).toFixed(0)+"%"});c.appendChild(e);c.appendChild(d);document.body.insertBefore(c,document.body.firstChild);var f=I(Q,b,document.getElementById("app"));requestAnimationFrame(a)});}).call();
