(function(){'use strict';function n(a,b,c){"x"!==b[0]?a.setAttribute(b,c):"m"===b[1]&&"l"===b[2]?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",b,c):"l"===b[1]&&"i"===b[2]?a.setAttributeNS("http://www.w3.org/1999/xlink",b,c):a.setAttribute(b,c)}function q(a,b,c){this._flags=a;this._tag=b;this._key=void 0;this._props=c;this.cref=this.ref=this._children=this._className=this._style=this._attrs=void 0}q.prototype.key=function(a){this._key=a;return this};q.prototype.props=function(a){this._props=a;return this};
q.prototype.dynamicShapeProps=function(a){this._flags|=256;this._props=a;return this};q.prototype.attrs=function(a){this._attrs=a;return this};q.prototype.dynamicShapeAttrs=function(a){this._flags|=128;this._attrs=a;return this};q.prototype.style=function(a){this._style=a;return this};q.prototype.className=function(a){this._className=a;return this};q.prototype.children=function(a){this._children=a;return this};q.prototype.trackByKeyChildren=function(a){this._flags|=16;this._children=a;return this};
q.prototype.value=function(a){this._flags|=512;this._children=a;return this};q.prototype.checked=function(a){this._flags|=1024;this._children=a;return this};q.prototype.keepAlive=function(){this._flags|=2048;return this};q.prototype.managedContainer=function(a){this._flags|=32;this.cref=a;return this};q.prototype.disableChildrenShapeError=function(){return this};q.prototype.disableFreeze=function(){return this};
q.prototype._canSync=function(a){return this._flags===a._flags&&this._tag===a._tag&&this._key===a._key};q.prototype.create=function(a){var b=this._flags;this._flags&=-65;0!==(b&1)?this.ref=document.createTextNode(this._props):0!==(b&2)?this.ref=0===(b&131072)?0===(b&32768)?document.createElement(this._tag):document.createElementNS("http://www.w3.org/2000/svg",this._tag):this._tag.createElement():(a=this._tag.createComponent(a,this._props,this._children),this.ref=a.element,this.cref=a)};
q.prototype.createCommentPlaceholder=function(){this._flags|=64;this.ref=document.createComment("")};
q.prototype.render=function(a,b){var c,d,e,f,k=this._flags,g;if(0!==(k&10)){g=this.ref;if(0===(k&262144)){var h=this._props;if(void 0!==h)for(f=Object.keys(h),c=0,d=f.length;c<d;c++)e=f[c],g[e]=h[e];if(void 0!==this._attrs)for(f=Object.keys(this._attrs),c=0,d=f.length;c<d;c++)e=f[c],n(g,e,this._attrs[e]);void 0!==this._style&&(0===(k&32768)?g.style.cssText=this._style:g.setAttribute("style",this._style));void 0!==this._className&&(0===(k&32768)?g.className=this._className:g.setAttribute("class",this._className))}else 0===
(k&8)?this._tag.update(g,void 0,this._props):a.descriptor._tag.update(g,void 0,this._props);e=this._children;if(void 0!==e)if(0===(this._flags&1536))if("string"===typeof e)g.textContent=e;else for(c=0,d=e.length;c<d;c++)this._insertChild(e[c],void 0,a,b);else 0!==(this._flags&512)?this.ref.value=this._children:this.ref.checked=this._children}else 0!==(k&4)&&(g=this.ref,void 0!==this._className&&(0===(k&32768)?g.className=this._className:g.setAttribute("class",this._className)),0===(b&1)&&this.cref.update());
this._freeze()};
q.prototype.mount=function(a,b){var c=this._flags,d=this._children;this.ref=a;if(0!==(c&4))d=this.cref=this._tag.mountComponent(a,b,this._props,this._children),d.setData(this._props),d.setChildren(this._children),d.update();else if(0!==(this._flags&10)){if(void 0!==this._props)for(var e=Object.keys(this._props),c=0;c<e.length;c++){var f=e[c];a[f]=this._props[f]}if(void 0!==d&&"string"!==typeof d&&0<d.length){for(e=a.firstChild;8===e.nodeType;)f=e,e=e.nextSibling,a.removeChild(f);for(c=0;c<d.length;c++)for(d[c].mount(e,
b),e=e.nextSibling;null!==e&&8===e.nodeType;)f=e,e=e.nextSibling,a.removeChild(f)}}this._freeze()};
q.prototype.sync=function(a,b,c){var d=this.ref,e=this._flags,f;a.ref=d;if(0!==(e&1))this._props!==a._props&&(this.ref.nodeValue=a._props);else if(0!==(e&10)){if(0===(e&262144)){if(this._props!==a._props)if(0===(this._flags&256)){f=this._props;var k=a._props,g=Object.keys(f),h,l;for(l=0;l<g.length;l++){h=g[l];var m=k[h];f[h]!==m&&(d[h]=m)}}else if(f=this._props,k=a._props,void 0!==f)if(void 0===k)for(h=Object.keys(f),g=0;g<h.length;g++)d[h[g]]=void 0;else{h=Object.keys(f);for(g=0;g<h.length;g++)l=
h[g],k.hasOwnProperty(l)?(m=k[l],f[l]!==m&&(d[l]=m)):d[l]=void 0;h=Object.keys(k);for(g=0;g<h.length;g++)l=h[g],f.hasOwnProperty(l)||(d[l]=k[l])}else if(void 0!==k)for(h=Object.keys(k),g=0;g<h.length;g++)l=h[g],d[l]=k[l];if(this._attrs!==a._attrs)if(0===(this._flags&128))for(f=this._attrs,k=a._attrs,g=Object.keys(f),l=0;l<g.length;l++)h=g[l],m=k[h],f[h]!==m&&n(d,h,m);else if(f=this._attrs,k=a._attrs,void 0!==f)if(void 0===k)for(h=Object.keys(f),g=0;g<h.length;g++)d.removeAttribute(h[g]);else{h=Object.keys(f);
for(g=0;g<h.length;g++)l=h[g],k.hasOwnProperty(l)?(m=k[l],f[l]!==m&&n(d,l,m)):d.removeAttribute(l);h=Object.keys(k);for(g=0;g<h.length;g++)l=h[g],f.hasOwnProperty(l)||n(d,l,k[l])}else if(void 0!==k)for(h=Object.keys(k),g=0;g<h.length;g++)l=h[g],n(d,l,k[l]);this._style!==a._style&&(f=void 0===a._style?"":a._style,0===(e&32768)?d.style.cssText=f:d.setAttribute("style",f));this._className!==a._className&&(f=void 0===a._className?"":a._className,0===(e&32768)?d.className=f:d.setAttribute("class",f))}else this._props!==
a._props&&(0===(e&8)?this._tag.update(d,this._props,a._props):b.descriptor._tag.update(d,this._props,a._props));0===(this._flags&1536)?this._children!==a._children&&this.syncChildren(this._children,a._children,b,c):0!==(e&512)?d.value!==a._children&&(d.value=a._children):d.checked!==a._children&&(d.checked=a._children)}else this._className!==a._className&&(f=void 0===a._className?"":a._className,0===(e&32768)?d.className=f:d.setAttribute("class",f)),b=a.cref=this.cref,0===(c&2)&&(b.setData(a._props),
b.setChildren(a._children),b.update());a._freeze()};q.prototype.attach=function(){if(0===(this._flags&4)){var a=this._children;if(void 0!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)a[b].attach()}else this.cref.attach()};q.prototype.attached=function(){0!==(this._flags&4)&&this.cref.attach()};q.prototype.detach=function(){if(0===(this._flags&4)){var a=this._children;if(void 0!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)a[b].detach()}else this.cref.detach()};
q.prototype.dispose=function(){if(0===(this._flags&2048))if(0!==(this._flags&4))this.cref.dispose();else{if(void 0!==this._children){var a=this._children;if("string"!==typeof a)for(var b=0;b<a.length;b++)a[b].dispose()}}else this.detach()};
q.prototype.syncChildren=function(a,b,c,d){var e,f,k=0,g=!1;if("string"===typeof a)if(void 0===b)this.ref.removeChild(this.ref.firstChild);else if("string"===typeof b)(a=this.ref.firstChild)?a.nodeValue=b:this.ref.textContent=b;else for(this.ref.removeChild(this.ref.firstChild);k<b.length;)this._insertChild(b[k++],void 0,c,d);else if("string"===typeof b){if(void 0!==a)for(;k<a.length;)this._removeChild(a[k++],c);this.ref.textContent=b}else if(void 0!==a&&0!==a.length)if(void 0===b||0===b.length)for(;k<
a.length;)this._removeChild(a[k++],c);else if(1===a.length&&1===b.length)e=a[0],f=b[0],e._canSync(f)?e.sync(f,c,d):this._replaceChild(f,e,c,d);else if(1===a.length){e=a[0];if(0===(this._flags&16))for(;k<b.length;){f=b[k++];if(e._canSync(f)){e.sync(f,c,d);g=!0;break}this._insertChild(f,e.ref,c,d)}else for(;k<b.length;){f=b[k++];if(e._key===f._key){e.sync(f,c,d);g=!0;break}this._insertChild(f,e.ref,c,d)}if(g)for(;k<b.length;)this._insertChild(b[k++],void 0,c,d);else this._removeChild(e,c)}else if(1===
b.length){f=b[0];if(0===(this._flags&16))for(;k<a.length;){e=a[k++];if(e._canSync(f)){e.sync(f,c,d);g=!0;break}this._removeChild(e,c)}else for(;k<a.length;){e=a[k++];if(e._key===f._key){e.sync(f,c,d);g=!0;break}this._removeChild(e,c)}if(g)for(;k<a.length;)this._removeChild(a[k++],c);else this._insertChild(f,void 0,c,d)}else 0===(this._flags&16)?this._syncChildren(a,b,c,d):this._syncChildrenTrackingByKeys(a,b,c,d);else if(void 0!==b&&0<b.length)for(k=0;k<b.length;k++)this._insertChild(b[k],void 0,
c,d)};q.prototype._syncChildren=function(a,b,c,d){for(var e=0,f=0,k=a.length-1,g=b.length-1,h,l;e<=k&&f<=g;){h=a[e];l=b[f];if(!h._canSync(l))break;e++;f++;h.sync(l,c,d)}for(;e<=k&&f<=g;){h=a[k];l=b[g];if(!h._canSync(l))break;k--;g--;h.sync(l,c,d)}for(;e<=k&&f<=g;)h=a[e++],l=b[f++],h._canSync(l)?h.sync(l,c,d):this._replaceChild(l,h,c,d);if(e<=k){do this._removeChild(a[e++],c);while(e<=k)}else if(f<=g){a=g+1;a=a<b.length?b[a].ref:void 0;do this._insertChild(b[f++],a,c,d);while(f<=g)}};
q.prototype._syncChildrenTrackingByKeys=function(a,b,c,d){var e=0,f=0,k=a.length-1,g=b.length-1,h=a[e],l=b[f],m=a[k],p=b[g],w=!1,D,C=0;a:do{for(w=!0;h._key===l._key;){h.sync(l,c,d);e++;f++;if(e>k||f>g)break a;h=a[e];l=b[f];w=!1}for(;m._key===p._key;){m.sync(p,c,d);k--;g--;if(e>k||f>g)break a;m=a[k];p=b[g];w=!1}for(;h._key===p._key;){h.sync(p,c,d);h=g+1;h=h<b.length?b[h].ref:void 0;this._moveChild(p,h,c);e++;g--;if(e>k||f>g)break a;h=a[e];p=b[g];w=!1;continue a}for(;m._key===l._key;){m.sync(l,c,d);
this._moveChild(l,h.ref,c);k--;f++;if(e>k||f>g)break a;m=a[k];l=b[f];w=!1;continue a}}while(!w&&e<=k&&f<=g);if(e>k)for(h=g+1,h=h<b.length?b[h].ref:void 0;f<=g;)this._insertChild(b[f++],h,c,d);else if(f>g)for(;e<=k;)this._removeChild(a[e++],c);else{w=k-e+1;h=g-f+1;l=Array(h);for(m=0;m<h;m++)l[m]=-1;var K=!1,L=0;if(16>=w*h)for(m=e;m<=k;m++){for(var E=!0,p=a[m],e=f;e<=g;e++)if(D=b[e],p._key===D._key){l[e-f]=m;C>e?K=!0:C=e;p.sync(D,c,d);E=!1;break}E&&(this._removeChild(p,c),L++)}else{E=new Map;for(m=
f;m<=g;m++)p=b[m],E.set(p._key,m);for(m=e;m<=k;m++)p=a[m],e=E.get(p._key),void 0!==e?(D=b[e],l[e-f]=m,C>e?K=!0:C=e,p.sync(D,c,d)):(this._removeChild(p,c),L++)}if(K){k=l.slice(0);a=[];a.push(0);g=0;for(C=l.length;g<C;g++)if(-1!==l[g])if(m=a[a.length-1],l[m]<l[g])k[g]=m,a.push(g);else{m=0;for(e=a.length-1;m<e;)p=(m+e)/2|0,l[a[p]]<l[g]?m=p+1:e=p;l[g]<l[a[m]]&&(0<m&&(k[g]=a[m-1]),a[m]=g)}m=a.length;for(e=a[m-1];0<m--;)a[m]=e,e=k[e];e=a.length-1;for(m=h-1;0<=m;m--)-1===l[m]?(h=m+f,p=b[h],h+=1,h=h<b.length?
b[h].ref:void 0,this._insertChild(p,h,c,d)):0>e||m!==a[e]?(h=m+f,p=b[h],h+=1,h=h<b.length?b[h].ref:void 0,this._moveChild(p,h,c)):e--}else if(w-L!==h)for(m=h-1;0<=m;m--)-1===l[m]&&(h=m+f,p=b[h],h+=1,h=h<b.length?b[h].ref:void 0,this._insertChild(p,h,c,d))}};
q.prototype._insertChild=function(a,b,c,d){if(0!==(this._flags&32)&&void 0!==this.cref.descriptor._insertChild)this.cref.descriptor._insertChild(this.cref,this.ref,a,b,c,d);else{var e=this.ref;void 0===a.ref?(a.create(c),e.insertBefore(a.ref,b),a.attached(),a.render(c,d)):(e.insertBefore(a.ref,b),a.attach())}};
q.prototype._replaceChild=function(a,b,c,d){if(0!==(this._flags&32)&&void 0!==this.cref.descriptor._replaceChild)this.cref.descriptor._replaceChild(this.cref,this.ref,a,b,c,d);else{var e=this.ref;void 0===a.ref?(a.create(c),e.replaceChild(a.ref,b.ref),a.attached(),a.render(c,d)):(e.replaceChild(a.ref,b.ref),a.attach());b.dispose()}};
q.prototype._moveChild=function(a,b,c){0!==(this._flags&32)&&void 0!==this.cref.descriptor._moveChild?this.cref.descriptor._moveChild(this.cref,this.ref,a,b,c):this.ref.insertBefore(a.ref,b)};q.prototype._removeChild=function(a,b){0!==(this._flags&32)&&void 0!==this.cref.descriptor._removeChild?this.cref.descriptor._removeChild(this.cref,this.ref,a,b):(this.ref.removeChild(a.ref),a.dispose())};q.prototype._freeze=function(){};
function r(a){this._observer=new MutationObserver(a);this._node=document.createTextNode("");this._toggle=48;this._observer.observe(this._node,{characterData:!0})}r.prototype.requestNextTick=function(){this._toggle^=1;this._node.data=String.fromCharCode(this._toggle)};function t(a){var b=this._message="__kivi"+Math.random();window.addEventListener("message",function(c){c.source===window&&c.data===b&&a()})}t.prototype.requestNextTick=function(){window.postMessage(this._message,"*")};
function u(){this._flags=0;this._componentTasks=[];this._focus=this._afterTasks=this._readTasks=this._writeTasks=void 0}u.prototype.updateComponent=function(a){var b=a.depth;for(this._flags|=1;b>=this._componentTasks.length;)this._componentTasks.push(void 0);var c=this._componentTasks[b];void 0===c?this._componentTasks[b]=[a]:c.push(a)};u.prototype.write=function(a){this._flags|=2;void 0===this._writeTasks&&(this._writeTasks=[]);this._writeTasks.push(a)};
u.prototype.read=function(a){this._flags|=4;void 0===this._readTasks&&(this._readTasks=[]);this._readTasks.push(a)};u.prototype.after=function(a){this._flags|=8;void 0===this._afterTasks&&(this._afterTasks=[]);this._afterTasks.push(a)};u.prototype.focus=function(a){this._focus=a};u.prototype._rwLock=function(){};u.prototype._rwUnlock=function(){};
function v(){var a=this;this._handleMicrotaskScheduler=function(){a._flags|=1;for(a.time=Date.now();0<a._microtasks.length;){var b=a._microtasks;a._microtasks=[];for(var c=0;c<b.length;c++)b[c]()}a.clock++;a._flags&=-4};this._handleMacrotaskScheduler=function(){a._flags&=-5;a._flags|=1;a.time=Date.now();var b=a._macrotasks;a._macrotasks=[];for(var c=0;c<b.length;c++)b[c]();a.clock++;a._flags&=-2};this._handleAnimationFrame=function(b){var c=a._updateComponents,d;a._flags&=-9;a._flags|=1;a.time=Date.now();
0!==(a._flags&16)&&(a._throttledFrameDeadline=b+a._throttledTimePerFrame);var e=a._nextFrame;a._nextFrame=a._currentFrame;a._currentFrame=e;a._currentFrame._rwUnlock();a._nextFrame._rwUnlock();for(b=0;b<c.length;b++)c[b].markDirty();do{for(;0!==(e._flags&3);){if(0!==(e._flags&1)){e._flags&=-2;var f=e._componentTasks;for(b=0;b<f.length;b++){var k=f[b];if(void 0!==k)for(f[b]=void 0,d=0;d<k.length;d++)k[d].update()}}if(0!==(e._flags&2))for(e._flags&=-3,d=e._writeTasks,e._writeTasks=void 0,b=0;b<d.length;b++)d[b]()}b=
0;for(d=c.length;b<d;)f=c[b++],0===(f.flags&16)?(f.flags&=-33,b===d?c.pop():c[--b]=c.pop()):f.update();for(;0!==(e._flags&4);)for(e._flags&=-5,d=e._readTasks,e._readTasks=void 0,b=0;b<d.length;b++)d[b]()}while(0!==(e._flags&3));for(a._currentFrame._rwLock();0!==(e._flags&8);)for(e._flags&=-9,d=e._afterTasks,e._afterTasks=void 0,b=0;b<d.length;b++)d[b]();void 0!==e._focus&&(e._focus.constructor===q?e._focus.ref.focus():e._focus.focus(),e._focus=void 0);0<c.length&&a.requestAnimationFrame();a.clock++;
a._flags&=-2};this._flags=0;this.clock=1;this.time=0;this._microtasks=[];this._macrotasks=[];this._currentFrame=new u;this._nextFrame=new u;this._updateComponents=[];this._microtaskScheduler=new r(this._handleMicrotaskScheduler);this._macrotaskScheduler=new t(this._handleMacrotaskScheduler);this.defaultThrottleTime=5;this._throttledFrameDeadline=this._throttledTimePerFrame=this._throttleEnabledCounter=0;this._currentFrame._rwLock()}
v.prototype.requestAnimationFrame=function(){0===(this._flags&8)&&(this._flags|=8,requestAnimationFrame(this._handleAnimationFrame))};v.prototype.currentFrame=function(){return this._currentFrame};v.prototype.nextFrame=function(){this.requestAnimationFrame();return this._nextFrame};
v.prototype.enableThrottling=function(a){void 0===a&&(a=this.defaultThrottleTime);this._throttleEnabledCounter++;0===(this._flags&16)?(this._flags|=16,this._throttledTimePerFrame=a):this._throttledTimePerFrame>a&&(this._throttledTimePerFrame=a)};v.prototype.disableThrottling=function(){this._throttleEnabledCounter--;0===this._throttleEnabledCounter&&(this._flags&=16)};v.prototype.frameTimeRemaining=function(){return this._throttledFrameDeadline-performance.now()};
v.prototype.startUpdateComponentEachFrame=function(a){this.requestAnimationFrame();this._updateComponents.push(a)};v.prototype.scheduleMicrotask=function(a){0===(this._flags&2)&&(this._flags|=2,this._microtaskScheduler.requestNextTick());this._microtasks.push(a)};v.prototype.scheduleMacrotask=function(a){0===(this._flags&4)&&(this._flags|=4,this._macrotaskScheduler.requestNextTick());this._macrotasks.push(a)};
v.prototype.start=function(a){this._flags|=1;this.time=Date.now();a();this.clock++;this._flags&=-2};var x=new v;function y(a,b,c,d){this._flags=a;this.invalidator=b;this._component=c;this._callback=d}y.prototype.cancel=function(){0===(this._flags&2)?(this.invalidator._removeSubscription(this),0!==(this._flags&1)&&this._component.removeSubscription(this)):(this.invalidator._removeTransientSubscription(this),0!==(this._flags&1)&&this._component.removeTransientSubscription(this))};
y.prototype._invalidate=function(){0!==(this._flags&1)?this._component.invalidate():this._callback()};function z(a){this._markFlags=131072;this._flags=0;this._tagName=a;this._ref=this._updateHandler=this._className=this._style=this._attrs=this._props=void 0}z.prototype.svg=function(){this._markFlags|=32768;this._flags|=32768;return this};z.prototype.props=function(a){this._props=a;return this};z.prototype.attrs=function(a){this._attrs=a;return this};z.prototype.style=function(a){this._style=a;return this};
z.prototype.className=function(a){this._className=a;return this};z.prototype.enableCloning=function(){this._flags|=1;return this};z.prototype.updateHandler=function(a){this._markFlags|=262144;this._updateHandler=a;return this};z.prototype.createVNode=function(a){return new q(2|this._markFlags,this,a)};z.prototype.createVRoot=function(a){return new q(8|this._markFlags,this,a)};
z.prototype.createElement=function(){var a,b,c,d;if(void 0===this._ref){a=0===(this._flags&32768)?document.createElement(this._tagName):document.createElementNS("http://www.w3.org/2000/svg",this._tagName);if(void 0!==this._props)for(c=Object.keys(this._props),b=0;b<c.length;b++)d=c[b],a[d]=this._props[d];if(void 0!==this._attrs)for(c=Object.keys(this._attrs),b=0;b<c.length;b++)d=c[b],n(a,d,this._attrs[d]);void 0!==this._style&&(0===(this._flags&32768)?a.style.cssText=this._style:a.setAttribute("style",
this._style));void 0!==this._className&&(0===(this._flags&32768)?a.className=this._className:a.setAttribute("class",this._className));return 0!==(this._flags&1)?(this._ref=a,this._ref.cloneNode(!1)):a}return this._ref.cloneNode(!1)};z.prototype.update=function(a,b,c){this._updateHandler(a,b,c)};function A(){this._markFlags=8;this._flags=0;this._tag="div";this._disposed=this._detached=this._attached=this._invalidated=this._update=this._init=this._setChildren=this._setData=void 0}
A.prototype.tagName=function(a){this._tag=a;return this};A.prototype.svg=function(){this._markFlags|=32768;this._flags|=32768;return this};A.prototype.vModel=function(a){this._markFlags|=a._markFlags;this._flags|=a._markFlags;this._tag=a;return this};A.prototype.canvas=function(){this._markFlags|=65536;this._flags|=65536;this._tag="canvas";return this};A.prototype.disableCheckDataIdentity=function(){this._markFlags|=128;return this};A.prototype.setData=function(a){this._setData=a;return this};
A.prototype.setChildren=function(a){this._setChildren=a;return this};A.prototype.init=function(a){this._init=a;return this};A.prototype.update=function(a){this._update=a;return this};A.prototype.invalidated=function(a){this._invalidated=a;return this};A.prototype.attached=function(a){this._attached=a;return this};A.prototype.detached=function(a){this._detached=a;return this};A.prototype.disposed=function(a){this._disposed=a;return this};A.prototype.enableRecycling=function(){return this};
A.prototype.createVNode=function(a){return new q(4,this,a)};A.prototype.createComponent=function(a,b,c){var d;d=0===(this._flags&131072)?0===(this._flags&32768)?document.createElement(this._tag):document.createElementNS("http://www.w3.org/2000/svg",this._tag):this._tag.createElement();a=new B(this._markFlags,this,d,a,b,c);void 0!==this._init&&this._init(a);return a};
A.prototype.mountComponent=function(a,b,c,d){a=new B(this._markFlags|4,this,a,b,c,d);void 0!==this._init&&this._init(a);a.attached();return a};function B(a,b,c,d,e,f){this.flags=a;this.mtime=0;this.descriptor=b;this.element=c;this.parent=d;this.depth=void 0===d?0:d.depth+1;this.state=void 0;this.data=e;this.children=f;this.root=0===(a&65536)?void 0:c.getContext("2d");this._transientSubscriptions=this._subscriptions=void 0}B.prototype.get2DContext=function(){return this.root};
B.prototype.markDirty=function(){this.flags|=8};B.prototype.setParent=function(a){this.parent=a;this.depth=void 0===a?0:a.depth+1};B.prototype.setData=function(a){var b=this.descriptor._setData;if(void 0===b){if(0!==(this.flags&128)||this.data!==a)this.data=a,this.flags|=8}else b(this,a)};B.prototype.setChildren=function(a){var b=this.descriptor._setChildren;void 0===b?this.children!==a&&(this.children=a,this.flags|=8):b(this,a)};B.prototype.startInteraction=function(){this.flags|=256;x.enableThrottling()};
B.prototype.finishInteraction=function(){this.flags&=-257;x.disableThrottling()};B.prototype.update=function(){10===(this.flags&10)&&(0===(x._flags&16)||0!==(this.flags&256)||0<x.frameTimeRemaining()?(this.descriptor._update(this),this.mtime=x.clock,this.flags&=-13):x.nextFrame().updateComponent(this))};
B.prototype.sync=function(a,b){b=void 0===b?0:b;void 0===this.root?(a.cref=this,0!==(this.flags&4)?(a.mount(this.element,this),this.flags&=-5):(a.ref=this.element,a.render(this,b))):this.root.sync(a,this,b);this.root=a};B.prototype.invalidate=function(){if(0===(this.flags&9)){this.flags|=8;this.cancelTransientSubscriptions();x.nextFrame().updateComponent(this);var a=this.descriptor._invalidated;void 0!==a&&a(this)}};
B.prototype.startUpdateEachFrame=function(){this.flags|=16;0===(this.flags&32)&&(this.flags|=32,x.startUpdateComponentEachFrame(this))};B.prototype.stopUpdateEachFrame=function(){this.flags&=-17};B.prototype.attach=function(){this.attached();void 0!==this.root&&0===(this.flags&65536)&&this.root.attach()};B.prototype.attached=function(){this.flags|=2;var a=this.descriptor._attached;void 0!==a&&a(this)};B.prototype.detach=function(){void 0!==this.root&&0===(this.flags&65536)&&this.root.detach();this.detached()};
B.prototype.detached=function(){this.flags&=-19;this.cancelSubscriptions();this.cancelTransientSubscriptions();var a=this.descriptor._detached;void 0!==a&&a(this)};B.prototype.dispose=function(){this.flags|=1;void 0!==this.root&&0===(this.flags&65536)&&this.root.dispose();0!==(this.flags&2)&&this.detached();var a=this.descriptor._disposed;void 0!==a&&a(this)};
B.prototype.subscribe=function(a){a=a.subscribeComponent(this);var b=this._subscriptions;void 0===b?this._subscriptions=a:b.constructor===y?this._subscriptions=[this._subscriptions,a]:b.push(a)};B.prototype.transientSubscribe=function(a){a=a.transientSubscribeComponent(this);var b=this._transientSubscriptions;void 0===b?this._transientSubscriptions=a:b.constructor===y?this._transientSubscriptions=[this._transientSubscriptions,a]:b.push(a)};
B.prototype.removeSubscription=function(a){var b=this._subscriptions;b.constructor===y||1===b.length?this._subscriptions=void 0:(a=b.indexOf(a),b[a]=b.pop())};B.prototype.removeTransientSubscription=function(a){var b=this._transientSubscriptions;b.constructor===y||1===b.length?this._transientSubscriptions=void 0:(a=b.indexOf(a),b[a]=b.pop())};
B.prototype.cancelSubscriptions=function(){var a=this._subscriptions;if(void 0!==a)if(a.constructor===y)a.invalidator._removeSubscription(a);else for(var b=0;b<a.length;b++){var c=a[b];c.invalidator._removeSubscription(c)}this._subscriptions=void 0};
B.prototype.cancelTransientSubscriptions=function(){var a=this._transientSubscriptions;if(void 0!==a)if(a.constructor===y)a.invalidator._removeSubscription(a);else for(var b=0;b<a.length;b++){var c=a[b];c.invalidator._removeSubscription(c)}this._transientSubscriptions=void 0};function aa(a,b,c,d){var e=a.createComponent(void 0,c);d?(b.appendChild(e.element),e.attached(),e.update()):x.nextFrame().write(function(){b.appendChild(e.element);e.attached();e.update()});return e}
function F(a,b){this.elapsed=a;this.query=b}F.rand=function(){return new F(15*Math.random(),.1>Math.random()?"vacuum":.2>Math.random()?"<IDLE> in transaction":"SELECT blah FROM something")};var ba=new F(0,"");function G(a){this.id=G._nextId++;this.name=a;this.queries=null;this.update()}G.prototype.update=function(){for(var a=[],b=Math.floor(10*Math.random()+1),c=0;c<b;c++)a.push(F.rand());this.queries=a};
G.prototype.getTopFiveQueries=function(){var a=this.queries.slice();a.sort(function(a,c){return a.elapsed-c.elapsed});for(a=a.slice(0,5);5>a.length;)a.push(ba);return a};G._nextId=0;function H(a){this.dbs=[];for(var b=0;b<a;b++)this.dbs.push(new G("cluster"+b)),this.dbs.push(new G("cluster"+b+"slave"))}H.prototype.update=function(){for(var a=this.dbs,b=0;b<a.length;b++)a[b]=new G(a[b].name)};H.prototype.randomUpdate=function(a){for(var b=this.dbs,c=0;c<b.length;c++)Math.random()<a&&(b[c]=new G(b[c].name))};
var I=(new z("div")).className("popover left"),ca=(new z("div")).className("popover-content"),da=(new z("div")).className("arrow"),ea=(new A).vModel(I).update(function(a){void 0===a.state&&(a.state=da.createVNode());a.sync(I.createVRoot().children([ca.createVNode().children(a.data),a.state]))});function fa(a){if(!a)return"";if(60<a){var b=Math.floor(a/60);a=(a%60).toFixed(2).split(".");return b+":"+a[0]+"."+a[1]}return a.toFixed(2)}
var ga=(new z("td")).className("dbname"),ha=(new z("td")).className("query-count"),ia=(new A).tagName("tr").update(function(a){var b=a.data,c=b.getTopFiveQueries(),d=b.queries.length,e=Array(7);void 0===a.state&&(a.state=ga.createVNode().children(b.name));e[0]=a.state;e[1]=ha.createVNode().children([(new q(2,"span",void 0)).className(20<=d?"label label-important":10<=d?"label label-warning":"label label-success").children(""+d)]);for(b=0;5>b;b++){var d=c[b],f=d.elapsed;e[b+2]=(new q(2,"td",void 0)).className(10<=
f?"Query elapsed warn_long":1<=f?"Query elapsed warn":"Query elapsed short").children([new q(1,void 0,fa(f)),ea.createVNode(d.query)])}a.sync((new q(8,void 0,void 0)).children(e))}),J=(new z("table")).className("table table-striped latest-data"),ja=(new A).vModel(J).update(function(a){for(var b=a.data.dbs,c=Array(b.length),d=0;d<b.length;d++)c[d]=ia.createVNode(b[d]);a.sync(J.createVRoot().children([(new q(2,"tbody",void 0)).children(c)]))}),M=null,N=[],O=-1;
function P(){M||(M=document.createElement("div"),M.style.cssText="position: fixed;opacity: 0.9;right: 0;bottom: 0",document.body.appendChild(M))}function ka(a){N.push(a);-1===O&&requestAnimationFrame(function(){O=-1;var a=N;N=[];for(var c=0;c<a.length;c++)a[c]()})}function la(a,b,c,d){this.min=a;this.max=b;this.mean=c;this.now=d}function Q(){this.samples=[];this.maxSamples=100}Q.prototype.addSample=function(a){this.samples.length===this.maxSamples&&this.samples.shift();this.samples.push(a)};
Q.prototype.calc=function(){for(var a=this.samples[0],b=this.samples[0],c=0,d=0;d<this.samples.length;d++){var e=this.samples[d];e<a&&(a=e);e>b&&(b=e);c+=e}return new la(a,b,c/this.samples.length,this.samples[this.samples.length-1])};
function R(a,b,c){c=void 0===c?0:c;var d=this;this._syncView=function(){var a=d.results[d.results.length-1],b=30/(1.2*a.max),c=0===(d.flags&32)?a.min.toFixed(2):""+Math.round(a.min),g=0===(d.flags&32)?a.max.toFixed(2):""+Math.round(a.max),h=0===(d.flags&32)?a.mean.toFixed(2):""+Math.round(a.mean),a=0===(d.flags&32)?a.now.toFixed(2):""+Math.round(a.now);d.text.innerHTML=""+(0===(d.flags&1)?"<div>min: &nbsp;"+c+d.unitName+"</div>":"")+(0===(d.flags&2)?"<div>max: &nbsp;"+g+d.unitName+"</div>":"")+(0===
(d.flags&4)?"<div>mean: "+h+d.unitName+"</div>":"")+(0===(d.flags&8)?"<div>now: &nbsp;"+a+d.unitName+"</div>":"");if(0===(d.flags&16))for(d.ctx.fillStyle="#010",d.ctx.fillRect(0,0,100,30),d.ctx.fillStyle="#0f0",c=0;c<d.results.length;c++)d.ctx.fillRect(c,30,1,-(d.results[c].now*b));d._dirty=!1};this.name=a;this.unitName=b;this.flags=c;this.results=[];this.element=document.createElement("div");this.element.style.cssText="padding: 2px;background-color: #020;font-family: monospace;font-size: 12px;color: #0f0";
this.label=document.createElement("div");this.label.style.cssText="text-align: center";this.label.textContent=this.name;this.text=document.createElement("div");this.element.appendChild(this.label);this.element.appendChild(this.text);0===(c&16)?(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="display: block; padding: 0; margin: 0",this.canvas.width=100,this.canvas.height=30,this.ctx=this.canvas.getContext("2d"),this.element.appendChild(this.canvas)):this.ctx=this.canvas=null;
this._dirty=!1}R.prototype.addResult=function(a){100===this.results.length&&this.results.shift();this.results.push(a);this.invalidate()};R.prototype.invalidate=function(){this._dirty||(this._dirty=!0,ka(this._syncView))};
function ma(){function a(f){var k=1/((f-(0===e?f:e))/1E3);if(Infinity!==k){64===d.length&&d.shift();d.push(k);for(var g=k=0;g<d.length;g++)k+=d[g];b.addSample(k/d.length);c.addResult(b.calc())}e=f;requestAnimationFrame(a)}P();var b=new Q,c=new R("FPS","",39);M.appendChild(c.element);var d=[],e=0;requestAnimationFrame(a)}
function na(){P();if(void 0!==performance.memory){var a=function(){b.addSample(Math.round(d.usedJSHeapSize/1048576));c.addResult(b.calc());setTimeout(a,30)},b=new Q,c=new R("Memory","MB",5);M.appendChild(c.element);var d=performance.memory;a()}}function oa(a,b){this.data=new Q;this.widget=new R(a,b);this.startTime=0}var S={};function T(a){a=S[a];void 0!==a&&(a.startTime=performance.now())}
function U(a){var b=performance.now();a=S[a];void 0!==a&&(a.data.addSample(b-a.startTime),a.widget.addResult(a.data.calc()))}function pa(a){P();var b=S[a];void 0===b&&(S[a]=b=new oa(a,"ms"),M.appendChild(b.widget.element))}var V=.5,W;var X=window.location.search.substr(1).split("&");if(0===X.length)W={};else{for(var qa={},Y=0;Y<X.length;++Y){var Z=X[Y].split("=",2);qa[Z[0]]=1===Z.length?"":decodeURIComponent(Z[1].replace(/\+/g," "))}W=qa}var ra=W;
document.addEventListener("DOMContentLoaded",function(){function a(){T("data update");c.randomUpdate(V);U("data update");T("view update");f.markDirty();f.update();x.currentFrame().updateComponent(f);x.currentFrame().after(function(){U("view update")});x.nextFrame().write(a)}ma();na();pa("data update");pa("view update");if(void 0!==ra.incremental){var b=parseFloat(ra.incremental);0>=b&&(b=10);x.enableThrottling(b)}var c=new H(50),b=document.createElement("div");b.style.display="flex";var d=document.createElement("input");
d.type="range";d.style.marginBottom="10px";d.style.marginTop="5px";var e=document.createElement("label");e.textContent="mutations : "+(100*V).toFixed(0)+"%";d.addEventListener("change",function(a){V=Number.parseFloat(a.target.value)/100;e.textContent="mutations : "+(100*V).toFixed(0)+"%"});b.appendChild(e);b.appendChild(d);document.body.insertBefore(b,document.body.firstChild);var f=aa(ja,document.getElementById("app"),c);x.nextFrame().write(a)});}).call();
