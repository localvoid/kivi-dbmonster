(function(){'use strict';function q(a,b){this.a=a;this.b=b}var t=0;function u(a){t++;this.name=a;this.a=null;a=[];for(var b=Math.floor(10*Math.random()+1),d=0;d<b;d++){var c=15*Math.random(),e="SELECT blah FROM something";.2>Math.random()&&(e="<IDLE> in transaction");.1>Math.random()&&(e="vacuum");a.push(new q(c,e))}this.a=a}function v(a){a=a.a.slice();a.sort(function(a,d){return a.a-d.a});for(a=a.slice(0,5);5>a.length;)a.push(new q(0,""));return a}
function w(){this.a=[];for(var a=0;50>a;a++)this.a.push(new u("cluster"+a)),this.a.push(new u("cluster"+a+"slave"))};function x(a,b){this.a=b};function y(){this.a=0;this.g=[];this.b=this.f=this.c=this.h=null};function aa(a){var b=this.a="__pms"+Math.random().toString();window.addEventListener("message",function(d){d.source===window&&d.data===b&&a()})};function ba(a){this.b=new window.MutationObserver(a);this.a=document.createTextNode("");this.b.observe(this.a,{characterData:!0})};function A(){this.a=[];this.b=[]}function B(a){for(var b=0,d=a.a;b<d.length;)d[b++]();b=0;for(d=a.b;b<d.length;)d[b].call(d[b+1]),b+=2};new function(){this.a=0;this.c=1;this.b=new A;this.g=new A;this.f=new y;this.h=new y;this.j=[];var a=this;new ba(function(){a.a|=256;for(var b=a.b;0!==b.a.length||0!==b.b.length;)a.b=new A,B(b),b=a.b;a.c++;a.a&=-258});new aa(function(){a.a&=-3;a.a|=256;var b=a.g;if(0!==b.a.length||0!==b.b.length)a.g=new A,B(b);a.c++;a.a&=-257});this.i=function(){var b=a.j,d,c,e,f,h,g;a.a&=-9;a.a|=256;d=a.h;a.h=a.f;a.f=d;for(h=0;h<b.length;h++)b[h].a|=8;do{for(;0!==(d.a&3);){if(0!==(d.a&1))for(d.a&=-2,c=d.g,h=0;h<
c.length;h++)if(e=c[h],null!==e)for(c[h]=null,g=0;g<e.length;g++)f=e[g],f.constructor===E?F(f):f.call();if(0!==(d.a&2))for(d.a&=-3,e=d.h,h=0;h<e.length;h++)f=e[h],f.constructor===E?F(f):f.call()}h=0;for(g=b.length;h<g;)f=b[h++],0===(f.a&16)?(f.a&=-33,h===g?b.pop():b[--h]=b.pop()):F(f);for(;0!==(d.a&4);)for(d.a&=-5,e=d.c,d.c=null,h=0;h<e.length;h++)f=e[h],f.constructor===E?F(f):f.call()}while(0!==(d.a&3));for(;0!==(d.a&8);)for(d.a&=-9,e=d.f,h=0;h<e.length;h++)f=e[h],f.constructor===E?F(f):f.call();
null!==d.b&&(d.b.constructor===G?d.b.a.focus():d.b.focus(),d.b=null);0<b.length&&0===(a.a&8)&&(a.a|=8,window.requestAnimationFrame(a.i));a.c++;a.a&=-257}};function I(){this.b="div";this.a=null}function E(a,b,d,c,e,f){this.a=a;this.j=b;this.l=null===d?0:d.l+1;this.b=c;this.c=f;this.i=this.g=this.f=null}function J(a,b,d){var c;void 0===c&&(c=document.createElement(a.b));return new E(10,a,d,b,0,c)}function F(a){10===(a.a&10)&&(a.j.a(a),a.a&=-9)}function K(a,b){null===a.f?(b.i=a,0!==(a.a&4)?(L(b,a.c,a),a.a&=-5):(b.a=a.c,M(b,a))):N(a.f,b,a);a.f=b}
E.prototype.h=function(){this.a|=1;this.a&=-19;var a=this.g;if(null!==a)if(a.constructor===x)a.a.a(a);else for(var b=0;b<a.length;b++){var d=a[b];d.a.a(d)}this.g=null;a=this.i;if(null!==a)if(a.constructor===x)a.a.a(a);else for(b=0;b<a.length;b++)d=a[b],d.a.a(d);this.i=null;a=this.f;null!==a&&(a.constructor===G?a.h():a.constructor===E&&a.h())};function G(a,b,d){this.g=a;this.j=b;this.b=d;this.i=this.a=this.f=this.c=this.l=null}G.prototype.type=function(a){this.l=a;return this};function O(a,b){a.c=b;return a}function P(a,b){a.f=b;return a}function Q(a,b){return a.g===b.g&&a.j===b.j&&a.l===b.l&&!0}function R(a,b){var d=a.g;0!==(d&1)?a.a=document.createTextNode(a.b):0!==(d&2)?a.a=0===(d&16)?document.createElement(a.j):document.createElementNS("http://www.w3.org/2000/svg",a.j):0!==(d&4)&&(d=J(a.j,a.b,b),a.a=d.c,a.i=d)}
function M(a,b){var d,c;c=a.g;var e,f;if(0!==(c&14))if(d=a.a,e=null,null!==a.l&&(e=a.l),null!==a.c&&(f=a.c.join(" "),e=null===e?f:e+" "+f),null!==e&&(0!==(c&2)?(a.b=e,d.className=e):0!==(c&4)?d.className=e:(f=d.className,d.className=""===f?e:f+" "+e)),0!==(c&4))F(a.i);else if(null!==a.f)if(c=a.f,"string"===typeof c)d.textContent=c;else for(d=0,c=a.f.length;d<c;d++)S(a,a.f[d],null,b)}
function L(a,b,d){var c=a.g,e=a.f;a.a=b;if(0!==(c&4))b=new E(14,a.j,d,a.b,0,b),F(a.i=b);else if(null!==e&&"string"!==typeof e&&0<e.length){for(var c=b.firstChild,f;8===c.nodeType;)f=c,c=c.nextSibling,b.removeChild(f);for(a=0;a<e.length;a++)for(L(e[a],c,d),c=c.nextSibling;8===c.nodeType;)f=c,c=c.nextSibling,b.removeChild(f)}}
function N(a,b,d){var c=a.a,e=a.g,f,h;b.a=c;if(0!==(e&1))a.b!==b.b&&(a.a.nodeValue=b.b);else if(0!==(e&14)){if(0!==(e&2))a.c!==b.c?(null===b.b&&(h=b.l,null!==b.c&&(f=b.c.join(" "),h=null===h?f:h+" "+f),b.b=h),a.b!==b.b&&(c.className=null===b.b?"":b.b)):b.b=a.b;else if(a.c!==b.c){f=a.c;h=b.c;var c=c.classList,g,m,l,k;if(null!==f&&0!==f.length)if(null===h||0===h.length)for(g=0;g<f.length;g++)c.remove(f[g]);else if(1===f.length&&1===h.length)m=f[0],l=h[0],m!==l&&(c.remove(m),c.add(l));else if(1===f.length){m=
f[0];k=-1;for(g=0;g<h.length;g++)if(l=h[g],m===l){k=g;break}else c.add(l);if(-1!==k)for(g=k+1;g<h.length;g++)c.add(h[g]);else c.remove(m)}else if(1===h.length){l=h[0];k=-1;for(g=0;g<f.length;g++)if(m=f[g],m===l){k=g;break}else c.remove(m);if(-1!==k)for(g=k+1;g<f.length;g++)c.remove(f[g]);else c.add(l)}else{k=g=0;for(var n=f.length-1,p=h.length-1,z=!1,r;g<=n&&k<=p&&f[g]===h[k];)g++,k++;for(;g<=n&&k<=p&&f[n]===h[p];)n--,p--;for(var C=Array(p-k+1);g<=n;g++){m=f[g];z=!0;for(r=k;r<=p;r++)if(l=h[r],m===
l){z=!1;C[r-k]=!0;break}z&&c.remove(m)}for(g=k;g<=p;g++)C[g-k]||c.add(h[g])}else if(null!==h&&0<h.length)for(g=0;g<h.length;g++)c.add(h[g])}if(0!==(e&4))a=b.i=a.i,d=b.b,a.b!==d&&(a.b=d,a.a|=8),F(a);else if(e=a.f,b=b.f,c=0,g=!1,"string"===typeof e)if("string"===typeof b)e!==b&&((d=a.a.firstChild)?d.nodeValue=b:a.a.textContent=b);else{if(null!==b)for(;c<b.length;)S(a,b[c++],null,d)}else if("string"===typeof b){if(null!==e)for(;c<e.length;)T(a,e[c++]);a.a.textContent=b}else if(null!==e&&0!==e.length)if(null===
b||0===b.length)for(;c<e.length;)T(a,e[c++]);else if(1===e.length&&1===b.length)f=e[0],h=b[0],Q(f,h)?N(f,h,d):(b=h,e=f,R(b,d),a.a.replaceChild(b.a,e.a),e.h(),M(b,d));else if(1===e.length){f=e[0];if(0===(a.g&32))for(;c<b.length;){h=b[c++];if(Q(f,h)){N(f,h,d);g=!0;break}S(a,h,f.a,d)}else for(;c<b.length;){h=b[c++];N(f,h,d);g=!0;break}if(g)for(;c<b.length;)S(a,b[c++],null,d);else T(a,f)}else if(1===b.length){h=b[0];if(0===(a.g&32))for(;c<e.length;){f=e[c++];if(Q(f,h)){N(f,h,d);g=!0;break}T(a,f)}else for(;c<
e.length;){f=e[c++];N(f,h,d);g=!0;break}if(g)for(;c<e.length;)T(a,e[c++]);else S(a,h,null,d)}else if(0===(a.g&32)){f=c=0;g=e.length-1;for(h=b.length-1;c<=g&&f<=h;){k=e[c];l=b[f];if(!Q(k,l))break;c++;f++;N(k,l,d)}for(;c<=g&&f<=h;){k=e[g];l=b[h];if(!Q(k,l))break;g--;h--;N(k,l,d)}for(;c<=g&&f<=h;)k=e[c++],l=b[f++],Q(k,l)?N(k,l,d):(m=a,n=d,R(l,n),m.a.replaceChild(l.a,k.a),k.h(),M(l,n));if(c<=g){do T(a,e[c++]);while(c<g)}else if(f<=h){e=h+1;e=e<b.length?b[e].a:null;do S(a,b[f++],e,d);while(f<h)}}else{f=
l=0;k=e.length-1;m=b.length-1;h=e[l];var c=b[f],H,n=0;a:do for(;;){N(h,c,d);l++;f++;if(l>k||f>m)break a;h=e[l];c=b[f]}while(l<=k&&f<=m);if(l>k)for(k=m+1,k=k<b.length?b[k].a:null;f<=m;)S(a,b[f++],k,d);else if(f>m)for(;l<=k;)T(a,e[l++]);else{p=k-l+1;c=m-f+1;h=Array(c);for(g=0;g<c;g++)h[g]=-1;z=!1;C=0;if(16>=p*c)for(g=l;g<=k;g++){var D=!0;r=e[g];for(l=f;l<=m;){H=b[l];h[l-f]=g;n>l?z=!0:n=l;N(r,H,d);D=!1;break}D&&(T(a,r),C++)}else{D={};for(g=f;g<=m;g++)D[null]=g;for(g=l;g<=k;g++)r=e[g],l=D[null],void 0!==
l?(H=b[l],h[l-f]=g,n>l?z=!0:n=l,N(r,H,d)):(T(a,r),C++)}if(z){g=h.slice(0);e=[];e.push(0);m=0;for(l=h.length;m<l;m++)if(-1!==h[m])if(k=e[e.length-1],h[k]<h[m])g[m]=k,e.push(m);else{k=0;for(n=e.length-1;k<n;)p=(k+n)/2|0,h[e[p]]<h[m]?k=p+1:n=p;h[m]<h[e[k]]&&(0<k&&(g[m]=e[k-1]),e[k]=m)}k=e.length;for(n=e[k-1];0<k--;)e[k]=n,n=g[n];l=e.length-1;for(g=c-1;0<=g;g--)-1===h[g]?(m=g+f,c=b[m],k=m+1,k=k<b.length?b[k].a:null,S(a,c,k,d)):0>l||g!==e[l]?(m=g+f,c=b[m],k=m+1,k=k<b.length?b[k].a:null,a.a.insertBefore(c.a,
k)):l--}else if(p-C!==c)for(g=c-1;0<=g;g--)-1===h[g]&&(m=g+f,c=b[m],k=m+1,k=k<b.length?b[k].a:null,S(a,c,k,d))}}else if(null!==b&&0<b.length)for(c=0;c<b.length;c++)S(a,b[c],null,d)}}G.prototype.h=function(){if(0!==(this.g&4))this.i.h();else if(null!==this.f){var a=this.f;if("string"!==typeof a)for(var b=0;b<a.length;b++)a[b].h()}};function S(a,b,d,c){R(b,c);a.a.insertBefore(b.a,d);M(b,c)}function T(a,b){a.a.removeChild(b.a);b.h()};function U(a){return new G(2,a,null)}function V(a,b){void 0===b&&(b=null);return new G(4,a,b)}function ca(a){var b=document.getElementById("app");a=J(W,a,null);b.appendChild(a.c);F(a);return a};var da=["popover","left"],X=new I;X.a=function(a){K(a,P(O(new G(8,null,null),da),[P(U("div").type("popover-content"),a.b),U("div").type("arrow")]))};var ea=["elapsed","warn_long"],fa=["elapsed","warn"],ga=["elapsed","short"],ha=["label-important"],ia=["label-warning"],ja=["label-success"];function ka(a){if(!a)return"";var b=parseFloat(a).toFixed(2);60<a&&(b=(a%60).toFixed(2).split("."),b=Math.floor(a/60)+":"+b[0]+"."+b[1]);return b}var Y=new I;Y.b="tr";
Y.a=function(a){for(var b=a.b,d=v(b),c=b.a.length,b=[P(U("td").type("dbname"),b.name),P(U("td").type("query-count"),[P(O(U("span").type("label"),20<=c?ha:10<=c?ia:ja),""+c)])],c=0;5>c;c++){var e=d[c],f=e.a;b.push(P(O(U("td").type("Query"),10<=f?ea:1<=f?fa:ga),[new G(1,null,ka(f)),V(X,e.b)]))}K(a,P(new G(8,null,null),b))};var la=["table","table-striped","latest-data"],W=new I;W.b="table";W.a=function(a){for(var b=a.b.a,d=Array(b.length),c=0;c<b.length;c++)d[c]=V(Y,b[c]);K(a,P(O(new G(8,null,null),la),[P(U("tbody"),d)]))};var Z=.5;
document.addEventListener("DOMContentLoaded",function(){function a(){for(var c=Z,d=b.a,e=0;e<d.length;e++)Math.random()<c&&(d[e]=new u(d[e].name));W.a(f);window.Monitoring.renderRate.ping();setTimeout(a,0)}var b=new w,d=document.createElement("div");d.style.display="flex";var c=document.createElement("input");c.type="range";c.style.marginBottom="10px";c.style.marginTop="5px";var e=document.createElement("label");e.textContent="mutations : "+(100*Z).toFixed(0)+"%";c.addEventListener("change",function(a){Z=
a.target.value/100;e.textContent="mutations : "+(100*Z).toFixed(0)+"%"});d.appendChild(e);d.appendChild(c);document.body.insertBefore(d,document.body.firstChild);var f=ca(b);setTimeout(a,0)});}).call();
